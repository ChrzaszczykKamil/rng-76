<html>
    <head>
        <title>Fallout 76 Timed Challenges</title>
        <style>
            * {
                font-family: sans-serif;
                font-size: 20px;
            }
            td {
                padding: 2px;
            }
            
            table.infoTable {
               border: 1px solid black;
               border-collapse: collapse;
            }
            table.infoTable td {
               border: 1px solid black;
            }
        </style>
        <meta name="keywords" content="Fallout,Fallout 76,Daily,Challenge,Challenges,Atom,Weekly,Score,S.C.O.R.E.,Community,Seasons,Season,Legenary Run,ATLAS,Fortify,Fortifying">
    </head>
    <body>
        <center>
            <span style="font-size: 36px; font-weight: bold;">Fallout 76 Timed Challenges (0.4.2)</span><br/>
            <br/>
            <br/>
            <table>
                <tr>
                    <td><button id='prevWeek' title='Go back a week.'>&lt;&lt;</button></td>
                    <td><button id='prevDay' title='Previous day.'>&lt;</button></td>
                    <td id='showndate' style='font-size: 24; text-align: center;'></td>
                    <td><button id='nextDay' title='Next day.'>&gt;</button></td>
                    <td><button id='nextWeek' title='Go forward a week.'>&gt;&gt;</button></td>
                </tr>
            </table>
            <br/>
            <br/>
            <table id='challenges'>
            </table>
        </center>
        <script>

            var oneHourLaterSince = new Date(Date.UTC(2020, 5, 30, 15, 0, 0, 0));

            function normalizeDate(date) {
                if (date < oneHourLaterSince) {
                    date.setUTCHours(15, 0, 0, 0);
                } else {
                    date.setUTCHours(16, 0, 0, 0);
                }
            }

            var selectedDate = new Date();
            normalizeDate(selectedDate);
            
            var now = new Date();
            if (selectedDate > now) {
                selectedDate.setDate(selectedDate.getDate() - 1);
            }

            var dsrc = document.location.search;
            if (dsrc.includes("day=")) {
                var idx = dsrc.indexOf("day=");
                var date = dsrc.substring(idx + 4);
                try {
                    selectedDate = new Date(date);
                } catch (e) {
                    // ignored
                }
            }
            normalizeDate(selectedDate);

            function levelUpFasnacht(offset) {
                return {
                            name: "Level up while (any 3)",
                            offset: offset,
                            period: 3,
                            subchallenges: [
                                {
                                    name: "Being level 76 or higher"
                                },
                                {
                                    name: "Wearing a Fasnacht Mask",
                                    tipId: "LevelUpFasnacht",
                                    tip: "There is usually a Fasnacht Man Mask in Fort Defiance."
                                },
                                {
                                    name: "Wearing Responder's Gear",
                                    tipId: "LevelUpResponders",
                                    tip: "Responder's Jumpsuit, Paramedic Jumpsuit, Pastor's Vestments should work."
                                },
                                {
                                    name: "Holding a Protest Sign",
                                    tipId: "LevelUpProtest",
                                    tip: "Fast travel to Poseidon Energy Plant and among the tents, there are a couple of protest signs."
                                },
                                {
                                    name: "on Deathclaw Island"
                                },
                                {
                                    name: "in a Group"
                                },
                                {
                                    name: "at Arktos Pharma under level 20"
                                },
                                {
                                    name: "at Wavy Willard's Water Park under level 30"
                                },
                                {
                                    name: "Naked"
                                },
                                {
                                    name: "Engaged in PvP"
                                },
                            ]
                        };
            }

            function levelUpWhitesprings(offset) {
                return {
                            name: "Level up while (any 3)",
                            offset: offset,
                            period: 6,
                            subchallenges: [
                                {
                                    name: "Being level 76 or higher"
                                },
                                {
                                    name: "At a Fissure site",
                                    tipId: "LevelUpFissure",
                                    tip: "Only the on-map named fissure sites count."
                                },
                                {
                                    name: "At/in Morgantown Airport under level 20"
                                },
                                {
                                    name: "In Whitesprings",
                                    tipId: "LevelUpWhitesprings",
                                    tip: "Be anywhere within the fenced area of the hotel, including the interior."
                                },
                                {
                                    name: "Near Grahm and Chally"
                                },
                                {
                                    name: "Wearing an Asylum Uniform and Hat",
                                    tipId: "LevelUpAsylum",
                                    tip: "Fort Defiance (Allegheny Asylum) has many Uniforms and Hats."
                                },
                                {
                                    name: "Wearing sunglasses"
                                },
                                {
                                    name: "Using chems"
                                },
                                {
                                    name: "Engaged in PvP"
                                },
                                {
                                    name: "Wielding a sword",
                                    tipId: "LevelUpSword",
                                    tip: "Machete and any weapon with Sword in its name should work."
                                }
                            ]
                        };
            }

            function levelUpWatoga(offset) {
                return {
                            name: "Level up while (any 3)",
                            offset: offset,
                            period: 6,
                            subchallenges: [
                                {
                                    name: "Being level 76 or higher"
                                },
                                {
                                    name: "In Watoga",
                                    tipId: "LevelUpWatoga",
                                    tip: "Be within the city bounds or the interior of the EMS, AMS, Civic Center or Municipal Center."
                                },
                                {
                                    name: "Wielding a music instrument as a weapon",
                                    tipId: "LevelUpMusic",
                                    tip: "Death Tambo, Guitar Sword or War Drum should work."
                                },
                                {
                                    name: "At/in the Top of the World under level 40"
                                },
                                {
                                    name: "At/in Vault-Tec Agricultural Research Center under level 10"
                                },
                                {
                                    name: "Wearing Formal Wear"
                                },
                                {
                                    name: "Wearing an Unstoppables Costume"
                                },
                                {
                                    name: "in Power Armor"
                                },
                                {
                                    name: "Well Fed"
                                },
                                {
                                    name: "Engaged in PvP"
                                },
                            ]
                        };
            }

            function levelUpCaves(offset) {
                return {
                            name: "Level up while (any 3)",
                            offset: offset,
                            period: 3,
                            subchallenges: [
                                {
                                    name: "Being level 76 or higher"
                                },
                                {
                                    name: "In Caves or Mines",
                                    tipId: "LevelUpCave",
                                    tip: "Unfortunately, Big Bent Tunnel doesn't count."
                                },
                                {
                                    name: "In a Workshop under level 20"
                                },
                                {
                                    name: "Well Tuned or Well Rested",
                                    tipId: "LevelUpWellTuned",
                                    tip: "Warning! Currently, Lover's Embrace and similar Ally-granted 3 hour bonus"
                                         + "<br>do not count towards this so make sure you are Well Tuned!"
                                },
                                {
                                    name: "Wielding an Axe",
                                    tipId: "LevelUpAxe",
                                    tip: "Grognak's Axe, Fire Axe, Pickaxe or Multi-purpose Axe should work."
                                },
                                {
                                    name: "In a Nuked Region"
                                },
                                {
                                    name: "Wearing a full Clown Suit",
                                    tipId: "LevelUpClown",
                                    tip: "Freddy Fear's House of Scares usually has a Clown Suit and Clown Hat."
                                },
                                {
                                    name: "Wearing Sleepwear"
                                },
                                {
                                    name: "Diseased"
                                },
                                {
                                    name: "Engaged in PvP"
                                },
                            ]
                        };
            }

            function buildAnythingCamp(offset) {
                return {
                            name: "Build anything in your C.A.M.P. or Workshop (x10)",
                            offset: offset,
                            period: 10,
                            tipId: "BuildAnything",
                            tip: "Floor Mat is the cheapest to build"
                        };
            }

            function craftAmmo(offset) {
                return {
                            name: "Craft Ammo (x50)",
                            offset: offset,
                            period: 10,
                            tipId: "CraftAmmo",
                            tip: "The perk Ammosmith doesn't count for this challenge."
                        };
            }

            function killSheepsquatch(offset) {
                return {
                            name: "Kill a Sheepsquatch",
                            offset: offset,
                            period: 10,
                            tipId: "KillSheepsquatch",
                            tip: "Other than the Free Range event, they are random encounters."
                        };
            }

            function scrapFiberglass(offset) {
                return {
                            name: "Scrap junk to produce Fiberglass (x5)",
                            offset: offset,
                            period: 10,
                            tipId: "ScrapFiberglass",
                            tip: "Scrap the telephones at the National Isolated Radio Array offices."
                        };
            }

            function scrapScrews(offset) {
                return {
                            name: "Scrap junk to produce Screws (x5)",
                            offset: offset,
                            period: 5,
                            tipId: "ScrapScrews",
                            tip: "Scrap the globes, fans and typewriters at the National Isolated Radio Array offices."
                        };
            }

            function scrapSprings(offset) {
                return {
                            name: "Scrap junk to produce Springs (x5)",
                            offset: offset,
                            period: 5,
                            tipId: "ScrapSprings",
                            tip: "Simply scrap Bulk Springs."
                        };
            }

            function killLegendary(offset) {
                return {
                            name: "Kill a Legendary enemy",
                            offset: offset,
                            period: 5,
                            tipId: "KillLegendary",
                            tip: "Check out horde events, fissure sites or West Tek."
                        };
            }

            function killLegendaryFissure(offset) {
                return {
                            name: "Kill a Legendary at a fissure site",
                            offset: offset,
                            period: 5,
                            tipId: "KillLegendaryFissure",
                            tip: "Named fissure sites only. Works best at Prime. " 
                                 + "<br>You have to be very close to the edge of the fissure site."
                                 + "<br>The enemy can be further away."
                        };
            }
            function buildFloorsCamp(offset) {
                return {
                            name: "Build floors, walls and roofs in your C.A.M.P. (x10)",
                            offset: offset,
                            period: 5,
                            tipId: "BuildFloors",
                            tip: "Remember to equip the Contractor perk card."
                        };
            }

            function buildLightingCamp(offset) {
                return {
                            name: "Build lighting in your C.A.M.P. or Workshop (x5)",
                            offset: offset,
                            period: 10,
                            tipId: "BuildLights",
                            tip: "Remember to equip the Contractor perk card."
                        };
            }

            function destroyTurrets(offset) {
                return {
                            name: "Destroy turrets (x5)",
                            offset: offset,
                            period: 30,
                            tipId: "DestroyTurrets",
                            tip: "Check out the Relay Towers."
                        };
            }

            function destroyRobots(offset) {
                return {
                            name: "Destroy robots (x5)",
                            offset: offset,
                            period: 30,
                            tipId: "DestroyRobots",
                            tip: "Check out the Vault-tec Agricultural Research Center near Flatwoods."
                        }
            }

            function killRadscorpions(offset) {
                return {
                            name: "Kill Radscorpions in the Savage Divide (x5)",
                            offset: offset,
                            period: 30,
                            tipId: "KilLRadScorpions",
                            tip: "Middle mountain Cabins, Top of the World and The Freakshow may have them."
                        };
            }

            function eatCandy(offset) {
                return {
                            name: "Eat pies, candies and sweets (x20)",
                            offset: offset,
                            period: 10,
                            tipId: "EatPies",
                            tip: "Gum drop works too but Dandy Boy Apples doesn't."
                        };
            }

            function harvestFungi(offset) {
                return {
                            name: "Harvest Fungi (x10)",
                            offset: offset,
                            period: 10,
                            tipId: "HarvestFungi",
                            tip: "Check out the river towards Flatwoods."
                        };
            }

            function killMoleMiner(offset) {
                return {
                            name: "Kill a Mole Miner",
                            offset: offset,
                            period: 10,
                            tipId: "KillMoleminer",
                            tip: "Check out the rooftop in Welch visible from the Station fast travel point."
                                 + "<br>Check out Blackwater Mine (exterior and interior) near The Whitespring resort."
                        };
            }

            function claimWorkshop(offset) {
                return {
                            name: "Claim a Workshop",
                            offset: offset,
                            period: 5,
                            tipId: "ClaimWorkshop",
                            tip: "Remember to stay crouched at all times and leave the build area"
                                  + "<br>as soon as you can to avoid unwanted PvP."
                        };
            }
            function killDeathclawIsland(offset) {
                return {
                            name: "Kill a Deathclaw on Deathclaw Island",
                            offset: offset,
                            period: 20,
                        };
            }
            function killDeathclaw(offset) {
                return {
                            name: "Kill a Deathclaw",
                            offset: offset,
                            period: 20,
                            tipId: "KillDeathclaw",
                            tip: "Check out Deathclaw Island or the Thunder Mountain Substation"
                                  + "<br>TM-02 north of Watoga."
                        };
            }

            function craftHealing(offset) {
                return {
                            name: "Craft Healing Items (any 5)",
                            offset: offset,
                            period: 10,
                            tipId: "CraftHealingItems",
                            tip: "Bug/tip: Crafting Healing Salve counts for crafting a Stimpak too.",
                            subchallenges: [
                                {
                                    name: "Antibiotics",
                                    tipId: "CraftAntibiotics",
                                    tip: "The plans are available in the Enclave Bunker Medical section."
                                },
                                {
                                    name: "Bloodpack",
                                    tipId: "CraftBloodpack",
                                    tip: "Requires Tick Blood (2) + Antiseptic (1)."
                                },
                                {
                                    name: "Diluted Radaway",
                                    tipId: "CraftDilutedRadaway",
                                    tip: "Radaway + Purified water"
                                },
                                {
                                    name: "Diluted Stimpak",
                                    tipId: "CraftDilutedStimpak",
                                    tip: "Stimpak + Purified water"
                                },
                                {
                                    name: "Disease Cure",
                                    tipId: "CraftDiseaseCure",
                                    tip: "Firecap (2) + Bloodleaf (2) + Snaptail Reed (2)."
                                        + "<br>Start from Slocum Joe's to pick up Firecap around, then go to the river"
                                        + "<br>towards Flatwoods to find Bloodleaf and then Snaptail Reed."
                                        + "<br>Don't forget to equip the Green Thumb (PER) perk card."
                                },
                                {
                                    name: "Glowing Bloodpack",
                                    tipId: "CraftGlowingBloodpack",
                                    tip: "Bloodpack + Glowing Blood + Antiseptic"
                                },
                                {
                                    name: "Healing Salve",
                                    tipId: "CraftHealingSalve",
                                    tip: "Soot Flower + Rhododendron Flower + Boiled Water. Check around the Overseer's Camp."
                                },
                                {
                                    name: "Skeeto Spit",
                                    tipId: "CraftSkeetoSpit",
                                    tip: "Blood Pack + Bloodleaf + Glass + Steel"
                                },
                                {
                                    name: "Standard Radaway",
                                    tipId: "CraftRadaway",
                                    tip: "Antiseptic + Glowing Fungus (3) + Purified Water + Plastic"
                                },
                                {
                                    name: "Standard Stimpak",
                                    tipId: "CraftStimpak",
                                    tip: "Antiseptic (2) + Blood Pack + Steel"
                                },
                                {
                                    name: "Super Stimpak",
                                    tipId: "CraftSuperStimpak",
                                    tip: "Ultracite + Antiseptic (2) + Blood Pack + Steel + Strangler Pod + Corpse Flower Stamen"
                                }
                            ]
                        };
            }

            function plantVegetables(offset) {
                return {
                            name: "Plant vegetables in your C.A.M.P. or Workshop (x10)",
                            offset: offset,
                            period: 10,
                            tipId: "PlantVegetables",
                            tip: "You can scrap and replant your vegetables."
                        };
            }

            function pickFlowers(offset) {
                return {
                            name: "Pick flowers (x10)",
                            offset: offset,
                            period: 10,
                            tipId: "PickFlowers",
                            tip: "Rododendron (magenta) and Soot Flower (blue) are easy to spot."
                                 + "<br>Bloodleaf works too, found in the river towards Flatwoods."
                        };
            }

            function revivePlayer(offset) {
                return {
                            name: "Revive a Player",
                            offset: offset,
                            period: 10,
                            tipId: "RevivePlayer",
                            tip: "No need to team up. Jump down from some height to down yourself."
                        };
            }

            function destroyLiberators(offset) {
                return {
                            name: "Destroy Liberators (x5)",
                            offset: offset,
                            period: 10,
                            tipId: "DestroyLiberators",
                            tip: "Tygart Water Treatment north of Sommersville has a bunch of them."
                        };
            }

            function killGhoulNuked(offset) {
                return {
                            name: "Kill Ghouls in a nuked region (x5)",
                            offset: offset,
                            period: 30,
                            tipId: "KillGhoulsNuled",
                            tip: "Nuke Whitesprings. Equip the Glow Sight perk for bonus damage."
                        };
            }

            function killRadroaches(offset) {
                return {
                            name: "Kill Radroaches in the Toxic Valley (x5)",
                            offset: offset,
                            period: 20,
                            tipId: "KillRadroaches",
                            tip: "Check around Hemlock Holes and Clarksburg Shooting Club."
                        };
            }

            function destroyRobotsWatoga(offset) {
                return {
                            name: "Destroy Robots in Watoga (x10)",
                            offset: offset,
                            period: 30,
                            tipId: "DestroyRobotsWatoga",
                            tip: "Liberators inside EMS and Mr. Gutsy random spawns count too. Some Watoga Mr. Handys don't count."
                        };
            }

            function chewBubblegum(offset) {
                return {
                            name: "Chew Bubblegum (x5)",
                            offset: offset,
                            period: 10,
                            tipId: "ChewBubblegum",
                            tip: "Gum drops don't work. Perk pack bubblegums do work."
                                + "<br>Find bubblegum in Whitesprings or in the Pumpkin House."
                        };
            }

            function killGlowing(offset) {
                return {
                            name: "Kill a Glowing Enemy",
                            offset: offset,
                            period: 10,
                            tipId: "KillGlowing",
                            tip: "They are everywhere. Equip the Glow Sight perk for bonus damage."
                        };
            }

            function killMirelurks(offset) {
                return {
                            name: "Kill Mirelurks (x5)",
                            offset: offset,
                            period: 10,
                            tipId: "KillMirelurk",
                            tip: "Ohio River Adventures spawns them regularly."
                                 + "Alternatively, start the defense miscellaneous quest with Fishbones there."
                        };
            }

            function harvestVegetables(offset) {
                return {
                            name: "Harvest vegetables (x5)",
                            offset: offset,
                            period: 10,
                            tipId: "HarvestVegetables",
                            tip: "Your C.A.M.P., someone else's C.A.M.P. or simply any world spawn will do."
                        };
            }

            function killWendigoCave(offset) {
                return {
                            name: "Kill a Wendigo in the Wendigo Cave",
                            offset: offset,
                            period: 30,
                            tipId: "KillWendigo",
                            tip: "You may have to hop servers and/or lob a grenade at the waterfall for it to spawn."
                        };
            }

            function killGulper(offset) {
                return {
                            name: "Kill a Gulper at the Gulper Lagoon",
                            offset: offset,
                            period: 30,
                            tipId: "KillGulper",
                            tip: "There are usually 3-4 of them."
                        };
            }

            function killAnglers(offset) {
                return {
                            name: "Kill Anglers in the Mire (x5)",
                            offset: offset,
                            period: 30,
                            tipId: "KillAngler",
                            tip: "There are usually 2 at the Thunder Mountain Substation TM-01 (South-east to Berkeley Springs Station) and"
                                 + "<br>there are 3 at the Gnarled Shallows (north of Thunder Mountain Power Plant)."
                        };
            }

            function collectCaps(offset) {
                return {
                            name: "Collect Caps (x100)",
                            offset: offset,
                            period: 10,
                            tipId: "CollectCaps",
                            tip: "Looting, selling, drinking Nuka cola products and quest rewards all count."
                        };
            }

            function cookMeals(offset) {
                return {
                            name: "Cook meals with vegetables or fungi (x5)",
                            offset: offset,
                            period: 10,
                            tipId: "CookMeals",
                            tip: "Perhaps the easiest is to craft Razorgrain Soup."
                        };
            }

            function hackTerminal(offset) {
                return {
                            name: "Hack a Terminal",
                            offset: offset,
                            period: 10,
                            tipId: "HackTerminal",
                            tip: "The Arktos Pharma reception terminal requires no hacking perk cards."
                        };
            }
            function killCryptid(offset) {
                return {
                            name: "Kill a Cryptid",
                            offset: offset,
                            period: 10,
                            tipId: "KillCryptid",
                            tip: "Wendigo (Wendigo Cave), Grafton Monster (Charleston Trainyard),"
                                + "<br>Snallygaster (Toxic Larry's Meet'n'go) or Mothman (Cultist camps)"
                        };
            }
            function collectWater(offset) {
                return {
                            name: "Collect Water (x50)",
                            offset: offset,
                            period: 10,
                            tipId: "CollectWater",
                            tip: "Collecting water from water sources and boiling them also counts."
                        };
            }
            function eatPrewarFood(offset) {
                return {
                            name: "Eat Pre-war Food (x20)",
                            offset: offset,
                            period: 10,
                            tipId: "EatPrewarfood",
                            tip: "Dog Food is everywhere. Bubblegum and Gum Drops count too. Check out diners around the map."
                        };
            }
            
            function killYaoGuai(offset) {
                return {
                            name: "Kill a Yao Guai",
                            offset: offset,
                            period: 10,
                            tipId: "KillYaoGuai",
                            tip: "Check out Monongah Overlook or Dolly Sods Wilderness."
                        };
            }

            var challengesDailyEra1 = {
                validStart: new Date(Date.UTC(2020, 3, 22, 15, 0, 0, 0)),
                validEnd: new Date(Date.UTC(2020, 4, 31, 15, 0, 0, 0)),
                options: [
                    levelUpFasnacht(0),
                    levelUpWhitesprings(1),
                    levelUpWatoga(4),
                    levelUpCaves(2),
                    buildAnythingCamp(0),
                    craftAmmo(0),
                    killSheepsquatch(0),
                    scrapFiberglass(0),
                    scrapScrews(1),
                    scrapSprings(3),
                    killLegendary(1),
                    killLegendaryFissure(3),
                    buildFloorsCamp(1),
                    buildLightingCamp(2),
                    destroyTurrets(1),
                    destroyRobots(11),
                    killRadscorpions(21),
                    eatCandy(2),
                    harvestFungi(2),
                    killMoleMiner(2),
                    claimWorkshop(3),
                    killDeathclawIsland(3),
                    killDeathclaw(13),
                    plantVegetables(4),
                    pickFlowers(4),
                    revivePlayer(4),
                    destroyLiberators(4),
                    killGhoulNuked(6),
                    killRadroaches(16),
                    destroyRobotsWatoga(26),
                    chewBubblegum(7),
                    killGlowing(7),
                    killMirelurks(7),
                    harvestVegetables(7),
                    killWendigoCave(8),
                    killGulper(18),
                    killAnglers(28),
                    collectCaps(9),
                    cookMeals(9),
                    hackTerminal(9),
                    killCryptid(9),
                    collectWater(5),
                    eatPrewarFood(5),
                    killYaoGuai(5),
                    craftHealing(5),
                ]
            };

            var challengesDailyEra1_2 = {
                validStart: new Date(Date.UTC(2020, 4, 31, 15, 0, 0, 0)),
                validEnd: new Date(Date.UTC(2020, 5, 1, 15, 0, 0, 0)),
                options: [
                    levelUpWhitesprings(0),
                    {
                        name: "Kill a Megasloth in the Cranberry Bog",
                        offset: 0,
                        period: 30,
                        tipId: "KillMegaslothCranberry",
                        tip: "They can show up between the Cranberry Glades and the Flooded Trainyard."
                    },
                    {
                        name: "Kill a Crave Cricket at/in the Uncanny Caverns",
                        offset: 0,
                        period: 30,
                        tipId: "KillCaveCricketUncanny",
                        tip: "May need several server hops. Outside and inside count."
                    },
                    {
                        name: "Kill Insects (x5)",
                        offset: 0,
                        period: 30,
                        tipId: "KillInsects",
                        tip: "."
                    },
                    {
                        name: "Kill Radants (x5)",
                        offset: 0,
                        period: 30,
                        tipId: "KillRadants",
                        tip: "Try Thunder Mountain Substation TM-02 north of Watoga."
                    }
                ]
            };

            var challengesDailyEra2 = {
                validStart: new Date(Date.UTC(2020, 5, 1, 15, 0, 0, 0)),
                validEnd: new Date(Date.UTC(2020, 5, 30, 15, 0, 0, 0)),
                options: [
                    levelUpFasnacht(0),
                    levelUpWatoga(1),
                    levelUpCaves(2),
                    levelUpWhitesprings(4),
                    collectCaps(0),
                    cookMeals(0),
                    hackTerminal(0),
                    killCryptid(0),
                    buildAnythingCamp(1),
                    craftAmmo(1),
                    killSheepsquatch(1),
                    scrapFiberglass(1),
                    killLegendary(2),
                    buildFloorsCamp(2),
                    destroyRobots(2),
                    scrapScrews(2),
                    buildLightingCamp(3),
                    eatCandy(3),
                    harvestFungi(3),
                    killMoleMiner(3),
                    scrapSprings(4),                
                    killLegendaryFissure(4),        
                    claimWorkshop(4),
                    killDeathclaw(4),
                    killDeathclawIsland(14),
                    plantVegetables(5),
                    pickFlowers(5),
                    revivePlayer(5),
                    destroyLiberators(5),
                    collectWater(6),
                    eatPrewarFood(6),
                    killYaoGuai(6),
                    craftHealing(6),
                    killRadroaches(7),
                    chewBubblegum(8),
                    killGlowing(8),
                    killMirelurks(8),
                    harvestVegetables(8),
                    killGulper(9),
                    killRadscorpions(12),
                    destroyRobotsWatoga(17),
                    killAnglers(19),
                    destroyTurrets(22),
                    killWendigoCave(29)
                ]
            };

            function times(text, count) {
                if (count === undefined || count < 2) {
                    return text;
                }
                return text + " (x" + count + ")";
            }

            function scoreChewBubblegum(offset) {
                return {
                            name: "Chew Bubblegum",
                            offset: offset,
                            period: 100,
                        };
            }
            function scoreCompleteOneEvent(offset, times) {
                var title = "Complete an event";
                if (times > 1) {
                    title += " (x" + times + ")";
                }
                return {
                            name: title,
                            offset: offset,
                            period: 100,
                        };
            }
            function scoreKillScorched(offset, count) {
                return {
                            name: times("Kill Scorched", count),
                            offset: offset,
                            period: 100,
                        };
            }
            function scoreKillScorched10(offset) {
                return scoreKillScorched(offset, 10);
            }
            function scoreLevelUp1(offset) {
                return {
                            name: "Level up",
                            offset: offset,
                            period: 1,
                        };
            }
            function scoreScrapAluminium10(offset) {
                return {
                            name: "Scrap junk to produce Aluminium (x10)",
                            offset: offset,
                            period: 100,
                            tipId: "ScoreScrapAluminium",
                            tip: "Scrapping and rebulking Aluminium works best."
                        };
            }
            function scoreCompleteDailyChallenge5(offset) {
                return {
                            name: "&#x1F947; Gold: Complete a Daily Challenge (x5)",
                            offset: offset,
                            period: 1
                        };
            }

            function scoreBuildWallDecor(offset, count) {
                return {
                            name: times("Build floor or wall decoration in your C.A.M.P. or Workshop", count),
                            offset: offset,
                            period: 100,
                            tipId: "ScoreWallDecor",
                            tip: "Find the cheapest floor mat and equip Contractor 2 (INT) to have it cost 1 cloth."
                        };
            }

            function scoreCollectPurifiedWater(offset, count) {
                return {
                            name: times("Collect purified water", count),
                            offset: offset,
                            period: 100,
                        };
            }
            function scoreKillLegendary(offset, count) {
                return {
                            name: times("Kill/destroy a legendary enemy", count),
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreCraftRanged5(offset) {
                return {
                            name: "Craft or scrap a ranged weapon (x5)",
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreKillCryptid3(offset) {
                return {
                            name: "Kill a Cryptid (x3)",
                            offset: offset,
                            period: 100,
                            tipId: "KillCryptid",
                            tip: "Wendigo (Wendigo Cave), Grafton Monster (Charleston Trainyard),"
                                + "<br>Snallygaster (Toxic Larry's Meet'n'go) or Mothman (Cultist camps)"
                        };
            }

            function scoreRepairArmorWeapon(offset, count) {
                var txt = count > 1 ? " (x" + count + ")": "";
                return {
                            name: times("Repair armor or weapon", count),
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreKillCreature15(offset) {
                return {
                            name: "Kill a creature (x15)",
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreCollectAudiotape(offset) {
                return {
                            name: "Collect an audio Holotape",
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreClaimWorkshop(offset) {
                return {
                            name: "Claim a Workshop",
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreCollectWood25(offset) {
                return {
                            name: "Collect wood (x25)",
                            offset: offset,
                            period: 100,
                            tipId: "scoreCollectWood",
                            tip: "You have to pick wood from fallen trees one by one. Scrapping bulk doesn't work."
                        };
            }

            function scoreCompleteEventInGroup(offset) {
                return {
                            name: "Complete an event while in a group",
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreBuildFloorWallCamp(offset, count) {
                return {
                            name: times("Build floors, walls or roofs in your C.A.M.P. or Workshop", count),
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreEatCookedMeal(offset, count) {
                return {
                            name: times("Eat cooked meal", count),
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreKillMoleminer(offset, count) {
                return {
                            name: times("Kill a Mole Miner", count),
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreBuySellItem(offset, count) {
                return {
                            name: times("Buy from or sell to another player", count),
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreKillGhoul10(offset) {
                return {
                            name: "Kill a Ghoul (x10)",
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreDestroyRobot10(offset) {
                return {
                            name: "Destroy a robot (x10)",
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreKillCryptid1(offset) {
                return {
                            name: "Kill a Cryptid",
                            offset: offset,
                            period: 100,
                            tipId: "KillCryptid",
                            tip: "Wendigo (Wendigo Cave), Grafton Monster (Charleston Trainyard),"
                                + "<br>Snallygaster (Toxic Larry's Meet'n'go) or Mothman (Cultist camps)"
                        };
            }

            function scoreKillGlowing(offset, count) {
                return {
                            name: times("Kill a glowing creature", count),
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreNWDeployCamp(offset, count) {
                return {
                            name: times("&#x2622; NW: Deploy a C.A.M.P.", count),
                            offset: offset,
                            period: 100,
                        };
            }
            function scoreNWDeployCamp4(offset) {
                return scoreNWDeployCamp(offset, 4);
            }

            function scoreBuildAnythingCamp(offset, count) {
                return {
                            name: times("Build anything in your C.A.M.P. or Workshop", count),
                            offset: offset,
                            period: 100,
                            tipId: "ScoreBuildAnythingCamp",
                            tip: "Equip Contractor (INT) and build a rug (Floor decor, 1 cloth) ten times."
                        };
            }

            function scoreNWPickLock(offset, count) {
                return {
                            name: times("&#x2622; NW: Pick a lock", count),
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreCompleteDaily(offset) {
                return {
                            name: "Complete a Daily Quest",
                            offset: offset,
                            period: 100,
                        };
            }
            function scoreCraftScrapPowerArmor(offset, count) {
                return {
                            name: times("Craft or scrap a Power Armor piece", count),
                            offset: offset,
                            period: 100,
                        };
            }
            function scoreKillSupermutant10(offset) {
                return {
                            name: "Kill a Super Mutant (x10)",
                            offset: offset,
                            period: 100,
                        };
            }
            function scoreUsePhotomode(offset, count) {
                return {
                            name: times("Use Photo Mode to take a photo", count),
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreNWKillCreature(offset, count) {
                return {
                            name: times("&#x2622; NW: Kill a creature", count),
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreNWUseStimpak(offset, count) {
                return {
                            name: times("&#x2622; NW: Use a Stimpak", count),
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreNWUseStimpak6(offset) {
                return scoreNWUseStimpak(offset, 6);
            }

            function scoreNWUseStimpak3(offset) {
                return scoreNWUseStimpak(offset, 3);
            }

            function scoreCraftAmmo(offset, count) {
                return {
                            name: times("Craft Ammo", count),
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreJoinGroup(offset) {
                return {
                            name: "Join a group with another Player",
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreNWIncreaseRank(offset) {
                return {
                            name: "&#x2622; NW: Increase your Overseer rank",
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreRankupPerkCard(offset) {
                return {
                            name: "Rank up a perk card",
                            offset: offset,
                            period: 100,
                        };
            }
            function scoreUsePhotomodeGroup(offset) {
                return {
                            name: "Use the photomode while in a group",
                            offset: offset,
                            period: 100,
                        };
            }
            function scoreNWRevivePlayer(offset, count) {
                return {
                            name: times("&#x2622; NW: Revive a Player", count),
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreHackTerminal(offset) {
                return {
                    name: "Hack a terminal",
                            offset: offset,
                            period: 100,
                };
            }

            function scorePickLock(offset, count) {
                return {
                    name: times("Pick a lock", count),
                            offset: offset,
                            period: 100,
                };
            }
            function scorePlantCrop(offset, count) {
                return {
                    name: times("Plant crops in your C.A.M.P. or Workshop", count),
                            offset: offset,
                            period: 100,
                };
            }
            function scoreNWKillPlayer(offset) {
                return {
                            name: "&#x2622; NW: Kill a Player",
                            offset: offset,
                            period: 100,
                        };
            }

            function scoreEatPrewarFood(offset, count) {
                return {
                    name: times("Eat pre-war food", count),
                            offset: offset,
                            period: 100,
                };
            }
            function scoreKillCreatureInGroup(offset, count) {
                return {
                    name: times("Kill a creature while in a group", count),
                            offset: offset,
                            period: 100,
                };
            }

            function scoreModArmor(offset, count) {
                return {
                    name: times("Mod armor", count),
                            offset: offset,
                            period: 100,
                };
            }

            function scoreCookMealPlant(offset) {
                return {
                    name: "Cook meal with plants of fungi (x5)",
                    offset: offset,
                    period: 100
                }
            }

            function scoreKillCreature25(offset) {
                return {
                    name: "Kill a creature (x25)",
                    offset: offset,
                    period: 100
                }
            }

            function scoreUsePhotomodeTeammate(offset) {
                return {
                    name: "Use photomode at a teammate's C.A.M.P.",
                    offset: offset,
                    period: 100
                };
            }

            function scoreKillGhoul15(offset) {
                return {
                    name: "Kill a ghoul (x15)",
                    offset: offset,
                    period: 100
                };
            }

            function scoreCollectBobblehead(offset) {
                return {
                    name: "Collect a bobblehead",
                    offset: offset,
                    period: 100
                };
            }
            function scoreChewBubblegum3(offset) {
                return {
                    name: "Chew bubblegum (x3)",
                    offset: offset,
                    period: 100
                };
            }

            function scoreConsumeAlcohol(offset, count) {
                return {
                    name: times("Consume alcohol", count),
                    offset: offset,
                    period: 100
                };
            }
            function scoreKillDeathclaw(offset, count) {
                return {
                    name: times("Kill a Deathclaw", count),
                    offset: offset,
                    period: 100
                };
            }

            function scoreModWeapon(offset, count) {
                return {
                    name: times("Mod a weapon", count),
                    offset: offset,
                    period: 100
                };
            }

            function scoreNWSurviveMinutes(offset, count) {
                return {
                    name: times("&#x2622; NW: survive for a minute", count),
                    offset: offset,
                    period: 100
                };
            }

            function scoreNWTakePhoto(offset) {
                return {
                    name: "&#x2622; NW: take a photo",
                    offset: offset,
                    period: 100
                };
            }

            function scoreUsePhotomodeOwnCamp(offset) {
                return {
                    name: "Use photomode in your own C.A.M.P.",
                    offset: offset,
                    period: 100
                };
            }

            function scoreKillSupermutant5(offset) {
                return {
                    name: "Kill a Super Mutant (x5)",
                    offset: offset,
                    period: 100
                };
            }

            function scoreKillThreestarLegendary(offset) {
                return {
                    name: "Kill a legendary 3-star creature",
                    offset: offset,
                    period: 100
                };
            }

            function scoreDailyplaceholder(offset) {
                return {
                            name: "<i>(Further challenges will be posted when the day comes.)</i>",
                            offset: offset,
                            period: 1400,
                        };
            }

            function scoreDrinkNukaCola(offset, count) {
                return {
                    name: times("Drink Nuka Cola", count),
                    offset: offset,
                    period: 100,
                };
            }

            function scoreScrapScrews(offset, count) {
                return {
                    name: times("Scrap junk to produce screws", count),
                    offset: offset,
                    period: 100,
                };
            }
            function scoreBonusScoreFortifyDays1(offset) {
                return {
                    name: "&#x1F6C8; Fortifying Atlas Reward day: Double daily S.C.O.R.E.",
                    offset: offset,
                    period: 100,
                    tipId: "ScoreFortifyReward1",
                    tip: "Part 1 Step 3 (150m Cork) challenge completed.",
                    ignore: true
                };
            }
            function scoreBonusLastWeekDaily(offset) {
                return {
                    name: "&#x1F6C8; Final week double daily S.C.O.R.E.",
                    offset: offset,
                    period: 100,
                    ignore: true
                };
            }
            function scoreBonusScoreFortifyDays2(offset) {
                return {
                    name: "&#x1F6C8; Fortifying Atlas Reward day: Bonus Challenges Week",
                    offset: offset,
                    period: 100,
                    tipId: "ScoreFortifyReward2",
                    tip: "Part 1 Step 4 (150m Plastic) challenge completed.",
                    ignore: true
                };
            }
            function scoreScrapSprings(offset, count) {
                return {
                    name: times("Scrap junk to produce springs", count),
                    offset: offset,
                    period: 100,
                    tipId: "ScoreScrapSprings",
                    tip: "Just bulk and scrap the bulked springs.",
                };
            }

            function scoreCraftScrapArmor(offset, count) {
                return {
                    name: times("Craft or scrap armor", count),
                    offset: offset,
                    period: 100,
                    tipId: "ScoreCraftScrapArmor",
                    tip: "Leather arms level 1 cost 1 cloth, 1 leather and 2 steel.",
                };
            }

            function scoreCollectCaps(offset, count) {
                return {
                    name: times("Collect caps", count),
                    offset: offset,
                    period: 100,
                };
            }
            function scoreLatepost(offset) {
                return {
                    name: "&#x1F6C8; This day's challenges will be posted a bit later than usual.",
                    offset: offset,
                    period: 100,
                    ignore: true
                };
            }

            function scoreCompleteEventInGroup(offset, count) {
                return {
                            name: times("Complete Events in group", count),
                            offset: offset,
                            period: 1400,
                        };
            }

            var challengesDailyEra3 = {
                validStart: new Date(Date.UTC(2020, 5, 30, 16, 0, 0, 0)),
                validEnd: new Date(Date.UTC(2020, 8, 8, 16, 0, 0, 0)),
                options: [
                    scoreCompleteDailyChallenge5(0),
                    scoreChewBubblegum(0),
                    scoreCompleteOneEvent(0, 1),
                    scoreKillScorched10(0),
                    scoreLevelUp1(0),
                    scoreScrapAluminium10(0),

                    scoreBuildWallDecor(1, 5),
                    scoreCollectPurifiedWater(1, 3),
                    scoreCompleteOneEvent(1, 3),
                    scoreKillLegendary(1, 1),

                    scoreCompleteOneEvent(2, 2),
                    scoreCraftRanged5(2),
                    scoreKillCryptid3(2),
                    scoreRepairArmorWeapon(2, 3),

                    scoreCollectAudiotape(3),
                    scoreKillCreature15(3),
                    scoreKillLegendary(3, 3),
                    scoreCompleteOneEvent(3, 1),

                    scoreClaimWorkshop(4),
                    scoreCollectWood25(4),
                    scoreCompleteEventInGroup(4),
                    scoreKillLegendary(4, 1),

                    scoreCompleteOneEvent(5, 1),
                    scoreBuildFloorWallCamp(5, 10),
                    scoreEatCookedMeal(5, 5),
                    scoreKillMoleminer(5, 10),

                    scoreBuySellItem(6),
                    scoreCompleteOneEvent(6, 1),
                    scoreEatCookedMeal(6, 5),
                    scoreKillGhoul10(6),

                    scoreCompleteOneEvent(7, 1),
                    scoreDestroyRobot10(7),
                    scoreKillCryptid1(7),
                    scoreKillGlowing(7, 1),
                    scoreNWDeployCamp(7, 3),

                    scoreBuildAnythingCamp(8, 10),
                    scoreCompleteOneEvent(8, 1),
                    scoreKillScorched10(8),
                    scoreKillLegendary(8),
                    scoreNWPickLock(8, 3),

                    scoreCompleteDaily(9),
                    scoreCraftScrapPowerArmor(9, 1),
                    scoreKillSupermutant10(9),
                    scoreUsePhotomode(9),
                    scoreNWKillCreature(9, 10),

                    scoreBuySellItem(10, 1),
                    scoreCompleteOneEvent(10, 1),
                    scoreKillLegendary3(10),
                    scoreRepairArmorWeapon(10, 10),
                    scoreNWUseStimpak6(10),

                    scoreClaimWorkshop(11),
                    scoreCompleteEventInGroup(11),
                    scoreCraftAmmo(11, 50),
                    scoreJoinGroup(11),
                    scoreKillCreature20(11),
                    scoreKillLegendary3(11),
                    scoreNWIncreaseRank(11),

                    scoreBuildWallDecor(12, 5),
                    scoreCompleteOneEvent(12, 2),
                    scoreJoinGroup(12),
                    scoreKillCryptid1(12),
                    scoreRankupPerkCard(12),
                    scoreUsePhotomodeGroup(12),
                    scoreNWRevivePlayer(12, 1),

                    scoreChewBubblegum(13),
                    scoreCompleteOneEvent(13, 1),
                    scoreHackTerminal(13),
                    scoreKillGhoul10(13),
                    scoreNWDeployCamp(13, 3),

                    scoreBuySellItem(14, 3),
                    scoreCompleteDaily(14),
                    scoreJoinGroup(14),
                    scoreKillGlowing(14, 1),
                    scoreKillMoleminer(14, 10),
                    scoreKillScorched10(14),
                    scoreNWKillCreature(14, 1),

                    scoreClaimWorkshop(15),
                    scoreCompleteOneEvent(15, 1),
                    scoreKillLegendary(15, 1),
                    scorePickLock(15),
                    scorePlantCrop(15, 10),
                    scoreUsePhotomode(15),
                    scoreNWKillPlayer(15),
                    
                    scoreBuySellItem(16, 3),
                    scoreCompleteOneEvent(16, 1),
                    scoreEatPrewarFood(16, 20),
                    scoreKillCreatureInGroup(16, 10),
                    scoreRepairArmorWeapon(16, 3),
                    scoreUsePhotomodeGroup(16),
                    scoreNWIncreaseRank(16),

                    scoreCompleteOneEvent(17),
                    scoreJoinGroup(17),
                    scoreKillLegendary(17, 1),
                    scoreKillScorched10(17),
                    scoreModArmor(17, 5),
                    scoreNWIncreaseRank(17),

                    scoreBuySellItem(18, 3),
                    scoreClaimWorkshop(18),
                    scoreCompleteOneEvent(18, 1),
                    scoreCookMealPlant(18),
                    scoreDestroyRobot10(18),
                    scoreKillCryptid1(18),
                    scoreNWDeployCamp4(18),

                    scoreBuildAnythingCamp(19, 10),
                    scoreCompleteEventInGroup(19),
                    scoreHackTerminal(19),
                    scoreKillLegendary(19, 1),
                    scoreKillScorched10(19),
                    scoreJoinGroup(19),
                    scoreNWIncreaseRank(19),

                    scoreBuySellItem(20, 3),
                    scoreClaimWorkshop(20),
                    scoreCompleteOneEvent(20),
                    scoreEatCookedMeal(20, 5),
                    scoreKillSupermutant10(20),
                    scoreRankupPerkCard(20),
                    scoreNWKillPlayer(20),

                    scoreBuySellItem(21, 3),
                    scoreCompleteOneEvent(21, 2),
                    scoreHackTerminal(21),
                    scoreJoinGroup(21),
                    scoreKillCreature15(21),
                    scoreKillLegendary(21, 3),
                    scoreNWKillCreature(21, 5),

                    scoreBuildFloorWallCamp(22, 10),
                    scoreBuySellItem(22, 3),
                    scoreCompleteOneEvent(22, 3),
                    scoreKillCreatureInGroup(22, 25),
                    scoreKillCryptid3(22),
                    scoreUsePhotomodeTeammate(22),
                    scoreNWDeployCamp(22, 3),

                    scoreBuySellItem(23, 3),
                    scoreCompleteDaily(23),
                    scoreKillGhoul15(23),
                    scoreKillLegendary3(23),
                    scoreModArmor(23, 5),
                    scoreUsePhotomodeGroup(23),
                    scoreNWIncreaseRank(23),

                    scoreBuySellItem(24, 3),
                    scoreChewBubblegum(24),
                    scoreCollectBobblehead(24),
                    scoreCompleteOneEvent(24, 2),
                    scoreKillGlowing(24, 1),
                    scoreKillLegendary(24, 3),
                    scoreNWDeployCamp(24, 3),

                    scoreBuildWallDecor(25, 5),
                    scoreBuySellItem(25, 3),
                    scoreChewBubblegum3(25),
                    scoreClaimWorkshop(25),
                    scoreCompleteOneEvent(25, 1),
                    scoreDestroyRobot10(25),
                    scoreNWIncreaseRank(25),

                    scoreBuySellItem(26, 3),
                    scoreClaimWorkshop(26),
                    scoreCompleteOneEvent(26, 2),
                    scoreJoinGroup(26),
                    scoreKillLegendary(26, 3),
                    scorePlantCrop(26, 10),
                    scoreNWUseStimpak3(26),

                    scoreBuySellItem(27, 3),
                    scoreCompleteOneEvent(27, 3),
                    scoreConsumeAlcohol(27, 5),
                    scoreEatPrewarFood(27, 5),
                    scoreKillCreature15(27),
                    scoreKillDeathclaw(27, 3),
                    scoreNWDeployCamp(27, 3),

                    scoreBuySellItem(28, 3),
                    scoreCompleteEventInGroup(28),
                    scoreDestroyRobot10(28),
                    scoreKillLegendary3(28),
                    scoreKillMoleminer(28, 10),
                    scoreUsePhotomode(28),
                    scoreNWKillCreature(28, 3),

                    scoreBuildWallDecor(29, 5),
                    scoreBuySellItem(29, 3),
                    scoreCompleteOneEvent(29, 1),
                    scoreKillGhoul10(29),
                    scoreRepairArmorWeapon(29, 3),
                    scoreUsePhotomodeGroup(29),
                    scoreNWIncreaseRank(29),

                    scoreBuySellItem(30, 3),
                    scoreCompleteOneEvent(30, 2),
                    scoreKillCreatureInGroup(30, 5),
                    scoreKillLegendary(30, 1),
                    scoreKillSupermutant10(30),
                    scoreModWeapon(30, 5),
                    scoreNWSurviveMinutes(30, 10),

                    scoreBuySellItem(31, 3),
                    scoreCompleteOneEvent(31, 3),
                    scoreCraftAmmo(31, 50),
                    scoreJoinGroup(31),
                    scoreKillScorched10(31),
                    scoreUsePhotomodeOwnCamp(31),
                    scoreNWIncreaseRank(31),

                    scoreBuySellItem(32, 3),
                    scoreChewBubblegum(32),
                    scoreClaimWorkshop(32),
                    scoreCompleteOneEvent(32, 2),
                    scoreKillLegendary(32, 3),
                    scoreKillSupermutant5(32),
                    scoreNWDeployCamp(32, 3),

                    scoreBuildFloorWallCamp(33, 10),
                    scoreBuySellItem(33, 3),
                    scoreCompleteEventInGroup(33),
                    scoreKillLegendary(33, 3),
                    scoreKillScorched(33, 15),
                    scoreUsePhotomode(33),
                    scoreNWSurviveMinutes(33, 10),

                    scoreBuySellItem(34, 3),
                    scoreCompleteOneEvent(34, 2),
                    scoreConsumeAlcohol(34, 5),
                    scoreEatPrewarFood(34, 5),
                    scoreKillCreature25(34),
                    scoreKillThreestarLegendary(34),
                    scoreNWIncreaseRank(34),

                    scoreBuildWallDecor(35, 5),
                    scoreBuySellItem(35, 3),
                    scoreChewBubblegum(35),
                    scoreCompleteOneEvent(35, 3),
                    scoreKillCryptid1(35),
                    scoreKillGlowing(35, 1),
                    scoreNWKillPlayer(35),

                    scoreBuildAnythingCamp(36, 5),
                    scoreBuySellItem(36, 3),
                    scoreClaimWorkshop(36),
                    scoreCompleteOneEvent(36, 2),
                    scoreHackTerminal(36),
                    scoreKillCreatureInGroup(36, 10),
                    scoreNWKillCreature(36, 3),

                    scoreBuySellItem(37, 3),
                    scoreCompleteEventInGroup(37),
                    scoreCraftScrapPowerArmor(37, 3),
                    scoreDrinkNukaCola(37, 3),
                    scoreKillGlowing(37, 1),
                    scoreKillMoleminer(37, 5),
                    scoreNWUseStimpak3(37),

                    scoreBuySellItem(38, 3),
                    scoreCompleteOneEvent(38, 2),
                    scoreJoinGroup(38),
                    scoreKillDeathclaw(38, 1),
                    scoreKillLegendary(38, 3),
                    scoreKillScorched10(38),
                    scoreNWDeployCamp(38, 2),

                    scoreBuySellItem(39, 3),
                    scoreClaimWorkshop(39),
                    scoreCompleteOneEvent(39, 1),
                    scoreDestroyRobot10(39),
                    scoreJoinGroup(39),
                    scoreUsePhotomodeOwnCamp(39),
                    scoreNWSurviveMinutes(39, 10),

                    scoreBuildWallDecor(40, 10),
                    scoreBuySellItem(40, 3),
                    scoreCompleteOneEvent(40),
                    scoreJoinGroup(40),
                    scoreKillLegendary(40, 3),
                    scoreUsePhotomode(40),
                    scoreNWSurviveMinutes(40, 1),

                    scoreBuySellItem(41, 3),
                    scoreCompleteDaily(41),
                    scoreCraftScrapPowerArmor(41, 3),
                    scoreEatCookedMeal(41, 5),
                    scoreKillCreatureInGroup(41, 10),
                    scoreKillGhoul10(41),
                    scoreNWTakePhoto(41),

                    scoreBuySellItem(42, 3),
                    scoreChewBubblegum(42),
                    scoreCompleteOneEvent(42, 1),
                    scoreCraftAmmo(42, 50),
                    scoreKillLegendary(42, 1),
                    scoreScrapScrews(42, 10),
                    scoreNWPickLock(42, 2),

                    scoreBuySellItem(43, 3),
                    scoreCollectBobblehead(43),
                    scoreCompleteOneEvent(43, 1),
                    scoreKillLegendary(43, 1),
                    scoreKillScorched(43, 10),
                    scorePlantCrop(43, 5),
                    scoreNWDeployCamp(43, 3),

                    scoreBuySellItem(44, 3),
                    scoreClaimWorkshop(44),
                    scoreCompleteOneEvent(44, 1),
                    scoreCraftRanged5(44),
                    scoreKillDeathclaw(44, 1),
                    scoreUsePhotomodeGroup(44),
                    scoreNWSurviveMinutes(44, 15),

                    scoreBuySellItem(45, 3),
                    scoreClaimWorkshop(45),
                    scoreCompleteEventInGroup(45),
                    scoreCookMealPlant(45),
                    scoreKillCreature15(45),
                    scoreRepairArmorWeapon(45, 3),
                    scoreNWKillCreature(45, 5),

                    scoreBuySellItem(46, 3),
                    scoreClaimWorkshop(46),
                    scoreCompleteOneEvent(46),
                    scoreJoinGroup(46),
                    scoreKillLegendary(46, 1),
                    scoreUsePhotomodeGroup(46),
                    scoreNWPickLock(46, 1),

                    scoreBuildAnythingCamp(47, 10),
                    scoreBuySellItem(47, 3),
                    scoreCompleteOneEvent(47, 1),
                    scoreCookMealPlant(47),
                    scoreKillGlowing(47, 3),
                    scoreKillSupermutant10(47),
                    scoreNWRevivePlayer(47, 2),

                    scoreBuySellItem(48),
                    scoreCompleteOneEvent(48, 1),
                    scoreEatPrewarFood(48, 5),
                    scoreKillGlowing(48, 3),
                    scoreKillScorched10(48),
                    scoreUsePhotomodeGroup(48),
                    scoreNWDeployCamp(48, 3),

                    scoreBuySellItem(49, 3),
                    scoreCollectPurifiedWater(49, 5),
                    scoreCompleteDaily(49),
                    scoreEatPrewarFood(49, 5),
                    scoreKillMoleminer(49, 10),
                    scoreScrapSprings(49, 10),
                    scoreNWKillCreature(49, 1),

                    scoreBuildFloorWallCamp(50, 5),
                    scoreBuySellItem(50, 3),
                    scoreChewBubblegum(50),
                    scoreClaimWorkshop(50),
                    scoreCompleteOneEvent(50, 1),
                    scoreKillCreatureInGroup(50, 15),
                    scoreNWPickLock(50, 1),

                    scoreBuySellItem(51, 3),
                    scoreCompleteOneEvent(51, 1),
                    scoreCraftScrapArmor(51, 5),
                    scoreDestroyRobot10(51),
                    scoreJoinGroup(51),
                    scoreKillCreature20(51),
                    scoreNWSurviveMinutes(51, 15),

                    scoreBuySellItem(52, 3),
                    scoreKillLegendary(52, 3),
                    scorePickLock(52, 3),
                    scoreCompleteOneEvent(52, 1),
                    scoreKillCreature15(52),
                    scoreKillCreatureInGroup(52, 10),
                    scoreNWUseStimpak(52, 3),

                    scoreBuySellItem(53, 3),
                    scoreChewBubblegum(53),
                    scoreClaimWorkshop(53),
                    scoreCompleteEventInGroup(53),
                    scoreDestroyRobot10(53),
                    scoreEatPrewarFood(53, 5),
                    scoreNWDeployCamp(53, 1),

                    scoreBuySellItem(54, 3),
                    scoreClaimWorkshop(54),
                    scoreCollectBobblehead(54),
                    scoreCompleteOneEvent(54, 2),
                    scoreKillSupermutant10(54),
                    scorePlantCrop(54, 10),
                    scoreNWKillCreature(54, 1),

                    scoreBuySellItem(55, 3),
                    scoreChewBubblegum(55),
                    scoreCompleteOneEvent(55, 1),
                    scoreHackTerminal(55),
                    scoreKillCreatureInGroup(55, 10),
                    scoreKillLegendary(55, 1),
                    scoreNWKillPlayer(55),

                    scoreBuildWallDecor(56, 5),
                    scoreBuySellItem(56, 3),
                    scoreCompleteOneEvent(56, 2),
                    scoreCraftAmmo(56, 24),
                    scoreKillDeathclaw(56, 1),
                    scoreKillMoleminer(56, 10),
                    scoreRepairArmorWeapon(56, 5),
                    scoreUsePhotomodeTeammate(56),
                    scoreNWSurviveMinutes(56, 15),

                    scoreBuildWallDecor(57, 5),
                    scoreBuySellItem(57, 3),
                    scoreClaimWorkshop(57),
                    scoreCollectCaps(57, 250),
                    scoreCollectPurifiedWater(57, 5),
                    scoreCollectWood25(57),
                    scoreCompleteDaily(57),
                    scoreKillCreatureInGroup(57, 15),
                    scoreNWDeployCamp(57, 2),

                    scoreBuySellItem(58, 3),
                    scoreChewBubblegum(58, 1),
                    scoreCompleteOneEvent(58, 2),
                    scoreDrinkNukaCola(58, 3),
                    scoreJoinGroup(58),
                    scoreKillCryptid1(58),
                    scoreKillScorched(58, 10),
                    scoreModWeapon(58, 3),
                    scoreNWTakePhoto(58),

                    scoreBuySellItem(59, 3),
                    scoreCompleteOneEvent(59, 3),
                    scoreConsumeAlcohol(59, 3),
                    scoreEatCookedMeal(59, 3),
                    scoreKillCreature25(59),
                    scoreKillLegendary(59, 1),
                    scorePlantCrop(59, 3),
                    scoreRankupPerkCard(59),
                    scoreNWSurviveMinutes(59, 30),

                    scoreBuySellItem(60, 3),
                    scoreClaimWorkshop(60),
                    scoreCompleteOneEvent(60, 2),
                    scoreCraftRanged5(60),
                    scoreKillCreatureInGroup(60, 25),
                    scoreKillGlowing(60, 1),
                    scoreKillMoleminer(60, 10),
                    scoreModWeapon(60, 3),
                    scoreNWUseStimpak3(60),

                    scoreBuySellItem(61, 3),
                    scoreClaimWorkshop(61),
                    scoreCompleteDaily(61),
                    scoreDestroyRobot10(61),
                    scoreEatPrewarFood(61, 5),
                    scoreKillCryptid1(61),
                    scoreModArmor(61, 3),
                    scoreBuildFloorWallCamp(61, 10),
                    scoreNWDeployCamp(61),

                    scoreBuySellItem(62, 3),
                    scoreCollectPurifiedWater(62, 3),
                    scoreCompleteOneEvent(62, 2),
                    scoreCraftAmmo(62, 50),
                    scoreKillDeathclaw(62, 1),
                    scoreKillGhoul10(62),
                    scoreConsumeAlcohol(62, 3),
                    scoreUsePhotomode(62, 3),
                    scoreNWKillCreature(62, 1),

                    //scoreLatepost(63),
                    scoreBuildFloorWallCamp(63, 5),
                    scoreBuySellItem(63, 3),
                    scoreCompleteOneEvent(63, 3),
                    scoreCraftAmmo(63, 25),
                    scoreJoinGroup(63),
                    scoreKillCreature25(63),
                    scoreNWSurviveMinutes(63, 15),

                    scoreBuildAnythingCamp(64, 3),
                    scoreBuySellItem(64, 3),
                    scoreCompleteOneEvent(64, 2),
                    scoreEatPrewarFood(64, 3),
                    scoreKillLegendary(64, 1),
                    scoreUsePhotomodeOwnCamp(64),
                    scoreNWRevivePlayer(64, 2),

                    scoreBuySellItem(65, 3),
                    scoreCompleteEventInGroup(65, 1),
                    scoreHackTerminal(65),
                    scoreKillGhoul15(65),
                    scoreModWeapon(65, 3),
                    scoreModArmor(65, 3),
                    scoreNWDeployCamp(65, 1),

                    scoreBuySellItem(66, 3),
                    scoreCollectPurifiedWater(66, 5),
                    scoreCompleteOneEvent(66, 2),
                    scoreKillGlowing(66, 5),
                    scoreKillLegendary(66, 3),
                    scorePickLock(66, 1),
                    scoreNWKillCreature(66, 3),

                    // bonus entries
                    scoreBonusScoreFortifyDays1(51),
                    scoreBonusScoreFortifyDays1(52),
                    scoreBonusScoreFortifyDays1(53),
                    scoreBonusScoreFortifyDays1(54),

                    scoreBonusScoreFortifyDays2(56),
                    scoreBonusScoreFortifyDays2(57),
                    scoreBonusScoreFortifyDays2(58),
                    scoreBonusScoreFortifyDays2(59),
                    scoreBonusScoreFortifyDays2(60),
                    scoreBonusScoreFortifyDays2(61),
                    scoreBonusScoreFortifyDays2(62),

                    scoreBonusLastWeekDaily(63),
                    scoreBonusLastWeekDaily(64),
                    scoreBonusLastWeekDaily(65),
                    scoreBonusLastWeekDaily(66),
                    scoreBonusLastWeekDaily(67),
                    scoreBonusLastWeekDaily(68),
                    scoreBonusLastWeekDaily(69),
                ]
            };

            var missingDay = 0;
            for (var e of challengesDailyEra3.options) {
                if (!e.ignore) {
                    missingDay = Math.max(missingDay, e.offset);
                }
            }

            for (var i = missingDay + 1; i < 70; i++) {
                challengesDailyEra3.options.push(scoreDailyplaceholder(i));
            }

            var challenges = [
                challengesDailyEra1,
                challengesDailyEra1_2,
                challengesDailyEra2,
                challengesDailyEra3
            ];

            // ******************************************************************************************************************************

            function completeEvents(offset) {
                return {
                            name: "Complete Events (x10)",
                            offset: offset,
                            period: 14,
                            tipId: "CompleteEvents",
                            tip: "Enclave events don't count unfortunately."
                        };
            }
            function gatherBuildingSupplies(offset) {
                return {
                            name: "Gather Building Supplies (any 5)",
                            offset: offset,
                            period: 14,
                            tipId: "GatherBuildingSupplies",
                            tip: "You can simply scrap bulk items of these components.",
                            subchallenges: [
                                {
                                    name: "Aluminium (x50)",
                                },
                                {
                                    name: "Concrete (x50)",
                                },
                                {
                                    name: "Copper (x50)",
                                },
                                {
                                    name: "Fertilizer (x50)",
                                },
                                {
                                    name: "Oil (x50)",
                                },
                                {
                                    name: "Screws, spings or gears (x50)",
                                },
                                {
                                    name: "Steel (x250)"
                                },
                                {
                                    name: "Wood (x250)"
                                },
                            ]
                        };
            }
            function killInPowerArmor(offset) {
                return {
                            name: "Kill/destroy enemies in Power Armor (x10)",
                            offset: offset,
                            period: 14
                        };
            }
            function killLegendariesMany(offset) {
                return {
                            name: "Kill Legendary enemies (x5)",
                            offset: offset,
                            period: 14,
                            tipId: "KillLegendariesMany",
                            tip: "Named fissure sites, West-Tek and Horde-events are a good place to find them."
                        };
            }

            function completeEventsGroup(offset) {
                return {
                            name: "Complete Events in Group (x10)",
                            offset: offset,
                            period: 28,
                            tipId: "CompleteEventsGroup",
                            tip: "Yeah, you have to get into a team for this one."
                        };
            }
            function worldOnFire(offset) {
                return {
                            name: "Set the World on Fire (any 3)",
                            offset: offset,
                            period: 14,
                            subchallenges: [
                                {
                                    name: "Take a picture at a fissure site",
                                    tipId: "TakePictureFissure",
                                    tip: "You have to be at the very edge of a named fissure site and use Photomode."
                                },
                                {
                                    name: "Launch a Nuke",
                                },
                                {
                                    name: "Kill enemies with the flamer (x10)",
                                },
                                {
                                    name: "Find Silo code pieces (x2)",
                                    tipId: "FindSiloCodes",
                                    tip: "Currently bugged."
                                },
                                {
                                    name: "Kill a Scorchbeast"
                                },
                                {
                                    name: "Win a Hunter/Hunted match (x3)"
                                },
                                {
                                    name: "Level up while engaged in PvP"
                                }
                            ]
                        };
            }
            function acquireFlux(offset) {
                return {
                            name: "Acquire flux from nuked flora (all)",
                            offset: offset,
                            period: 28,
                            tipId: "AcquireFlux",
                            tip: "Nuke Whitesprings so that the Safe'n Clean Disposal, the Bunker and the Golf Club are covered."
                            +"<br>If luckly, all plants turn into their nuked ones, including the Snaptail Reeds."
                            +"<br>Otherwise, you have to nuke Fissure Prime too.",
                            subchallenges: [
                                {
                                    name: "Raw Cobalt (x3)",
                                },
                                {
                                    name: "Raw Crimson (x3)",
                                },
                                {
                                    name: "Raw Fluorescent (x3)",
                                },
                                {
                                    name: "Raw Violet (x3)",
                                },
                                {
                                    name: "Raw Yellowcake (x3)"
                                },
                            ]
                        };
            }
            function buildupCamp(offset) {
                return {
                            name: "Build up your C.A.M.P. (all)",
                            offset: offset,
                            period: 28,
                            subchallenges: [
                                {
                                    name: "Build containers, displays or shelves (x1)",
                                    tipId: "BuildupCampContainer",
                                    tip: "Simply build another Stash Box."
                                },
                                {
                                    name: "Build wall or floor decorations (x5)",
                                    tipId: "BuildupCampFloor",
                                    tip: "Floor mats are the cheapest to build."
                                },
                                {
                                    name: "Build doors or stairs (x5)",
                                },
                                {
                                    name: "Plant crops or build water sources (x10)",
                                    tipId: "BuildupCampCrops",
                                    tip: "Scrap and replant your vegetables."
                                },
                                {
                                    name: "Build generators or lighting (x20)",
                                    tipId: "BuildupCampLighting",
                                    tip: "Placing the cheapest standing lamp works."
                                },
                            ]
                        };
            }

            function scorchedTop(offset) {
                return {
                            name: "Kill Scorched at the Top of the World (x25)",
                            offset: offset,
                            period: 56,
                            tipId: "ScorchedTopWorld",
                            tip: "Most of them can be found inside. You can also aggro the Scorched from the nearby locations,"
                            + "<br>however, you have to be within 20 meters of the elevator when you kill them for it to count."
                        };
            }

            function pickManyFlowers(offset) {
                return {
                            name: "Pick different kinds of flowers (any 8)",
                            offset: offset,
                            period: 28,
                            tipId: "Pick many flowers",
                            tip: "The perk Green Thumb doesn't work consistently with this challenge",
                            subchallenges: [
                                {
                                    name: "Ash Rose (x10)",
                                    tipId: "PickManyFlowersAshRose",
                                    tip: "Around Welch in the Ash Heap and around the Fissure Site in the Ash Heap."
                                },
                                {
                                    name: "Bloodleaf (x10)",
                                    tipId: "PickManyFlowersBloodleaf",
                                    tip: "Start from the Wayward towards Flatwoods in the river."
                                },
                                {
                                    name: "Carrot Flowers (x10)",
                                    tipId: "PickManyFlowersCarrotFlower",
                                    tip: "In the front garden of the Palace of the Winding Path."
                                },
                                {
                                    name: "Fever Blossoms (x10)",
                                    tipId: "PickManyFlowersFeverBlossom",
                                    tip: "In The Deep, west of Whitesprings"
                                },
                                {
                                    name: "Fern Flowers (x10)",
                                    tipId: "PickManyFlowersFernFlower",
                                    tip: "Around Fissure Site Prime."
                                },
                                {
                                    name: "Gourd Flowers (x10)",
                                    tipId: "PickManyFlowersGourdFlower",
                                    tip: "In front of Sugarmaple on the road (east of Sommersville lake), Sundary Brothers' Cabin or Cobbleton farm."
                                },
                                {
                                    name: "Rhododendron Flowers (x10)",
                                    tipId: "PickManyFlowersRhododendron",
                                    tip: "Around Slocum Joe's and moving towards Flatwoods."
                                },
                                {
                                    name: "Strangler Blooms (x10)",
                                    tipId: "PickManyFlowersStranglerBlooms",
                                    tip: "West of Dyer Chemical along the riverbed, after completing An Organic Solution quest."
                                },
                                {
                                    name: "Soot Flowers (x10)",
                                    tipId: "PickManyFlowersSootFlower",
                                    tip: "Around Slocum Joe's and moving towards Flatwoods."
                                },
                                {
                                    name: "Tato Flowers (x10)",
                                    tipId: "PickManyFlowersTatoFlower",
                                    tip: "In the front garden outside of Vault 94."
                                },
                                {
                                    name: "Thistle Blooms (x10)",
                                    tipId: "PickManyFlowersThistleBlooms",
                                    tip: "North-east of the Wavy Willard Water Park and north of the nearby Willard Corporate Housing."
                                },
                            ]
                        };
            }

            function craftAlcohol15(offset) {
                return {
                            name: "Craft Alcohol (any 15)",
                            offset: offset,
                            period: 112,
                        };
            }

            function enemiesGrafton(offset) {
                return {
                            name: "Kill enemies in Grafton (x25)",
                            offset: offset,
                            period: 112,
                        };
            }

            function consumeAlcohol10(offset) {
                return {
                            name: "Consume Alcohol (any 10)",
                            offset: offset,
                            period: 112,
                        };
            }

            function criticalHits25(offset) {
                return {
                            name: "Deal critical hits (x25)",
                            offset: offset,
                            period: 112,
                            tipId: "CriticalHits25",
                            tip: "Currently, the best is to use a shotgun as each pellet counts as a critical hit."
                        };
            }

            function criticalHits50(offset) {
                return {
                            name: "Deal critical hits (x50)",
                            offset: offset,
                            period: 112,
                            tipId: "CriticalHits50",
                            tip: "Currently, the best is to use a shotgun as each pellet counts as a critical hit."
                        };
            }

            function claimLakeside(offset) {
                return {
                            name: "Claim Lakeside Cabins",
                            offset: offset,
                            period: 56,
                        };
            }
            function claimRedRocketMega(offset) {
                return {
                            name: "Claim Red Rocket Mega Stop",
                            offset: offset,
                            period: 56,
                        };
            }

            function completeEventsQuestsGroup(offset) {
                return {
                            name: "Complete Events or Quests in group (x10)",
                            offset: offset,
                            period: 28,
                        };
            }
            function craftScrapWeaponArmor(offset) {
                return {
                            name: "Craft or Scrap weapons or armor",
                            offset: offset,
                            period: 28,
                        };
            }
            function killHugeCreatures(offset) {
                return {
                            name: "Kill huge creatures (any 3)",
                            offset: offset,
                            period: 28,
                            subchallenges: [
                                {
                                    name: "Super Mutant Behemoth",
                                    tipId: "KillHugeSuperMutantBehemoth",
                                    tip: "From the Vantage Point, go down the road towards south-east to find a pond."
                                },
                                {
                                    name: "Deathclaw",
                                    tipId: "KillHugeDeathclaw",
                                    tip: "Check out Deathclaw Island, Hopewell Cave, Thunder Mountain Substation TM-02 north of Watoga."
                                },
                                {
                                    name: "Grafton Monster",
                                    tipId: "KillHugeGraftonMonster",
                                    tip: "In the dried up riverbed between the power plant and the train yard."
                                    + "<br>Near the Charleston Capital fast travel point."
                                },
                                {
                                    name: "Mega Sloth",
                                    tipId: "KillHugeMegasloth",
                                    tip: "Check out South of Mosstown, southeast of the South Belle Motel, NAR Repair Yard,"
                                    + "<br>Cranberry Glade or the Overgrown Sundew Grove."
                                },
                                {
                                    name: "Mirelurk Queen",
                                    tipId: "KillHugeMirelurkQueen",
                                    tip: "Check out Highland Marsh (Mire), Quarry X3 (Cranberry Bog) or Sunrise Field (south of Watoga)."
                                },
                                {
                                    name: "Scorchbeast",
                                    tipId: "KillHugeScorchbeast",
                                    tip: "Any fissure site."
                                },
                                {
                                    name: "Sheepsquatch",
                                    tipId: "KillHugeSheepsquatch",
                                    tip: "Check out the Free Range event or locations such as NAR Repair Yard, Cranberry Glade,"
                                    + "<br>south of the Freakshow in the crater, south of Huntersville towards the crater, "
                                    + "<br>north-west of the Treetop house or west between Berkeley Station and Harper's Ferry."
                                },
                                {
                                    name: "Wendigo Colossus",
                                    tipId: "KillHugeWendigoColossus",
                                    tip: "Nuke fissure prime so that the Overgrown Sundew Grove is in the nuke radius."
                                    + "<br>It has a 7% chance of spawning and keep returning in about 10-15 minutes to trigger a fresh location spawn."
                                },
                            ]
                        };
            }
            function prepareFeast(offset) {
                return {
                            name: "Prepare a feast (all)",
                            offset: offset,
                            period: 28,
                            subchallenges: [
                                {
                                    name: "Chicken meat or Vegetarian Ham (x5)",
                                },
                                {
                                    name: "Instamash or Seasonings (x5)",
                                },
                                {
                                    name: "Cranberries (x10)"
                                },
                                {
                                    name: "Vegetables (x20)"
                                },
                                {
                                    name: "Fruit (x20)",
                                    tipId: "FeastFruit",
                                    tip: "Picking Cranberries count towards this as well."
                                },
                                {
                                    name: "Eggs (x6)",
                                    tipId: "FeastEggs",
                                    tip: "Mothman eggs from Point Pleasant, Mirelurk eggs from Highland Marsh or Radtoad eggs from Grafton."
                                },
                                {
                                    name: "Alcohol, juices or Nuka-Cola (x20)"
                                },
                                {
                                    name: "Sweets, cakes, pies or breads (x10)"
                                },
                            ]
                        };
            }


            function addWeekly(target, offset, func) {
                for (var i = offset; i < offset + 7; i++) {
                    target.push(func(i));
                }
            }

            var challengesWeeklyEra1 = {
                validStart: new Date(Date.UTC(2020, 3, 21, 15, 0, 0, 0)),
                validEnd: new Date(Date.UTC(2020, 5, 23, 15, 0, 0, 0)),
                options: []
            };

            addWeekly(challengesWeeklyEra1.options, 0, completeEvents);
            addWeekly(challengesWeeklyEra1.options, 0, gatherBuildingSupplies);
            addWeekly(challengesWeeklyEra1.options, 0, killInPowerArmor);
            addWeekly(challengesWeeklyEra1.options, 0, killLegendariesMany);
            addWeekly(challengesWeeklyEra1.options, 0, worldOnFire);

            addWeekly(challengesWeeklyEra1.options, 7, completeEventsGroup);
            addWeekly(challengesWeeklyEra1.options, 7, acquireFlux);
            addWeekly(challengesWeeklyEra1.options, 7, buildupCamp);
            addWeekly(challengesWeeklyEra1.options, 7, scorchedTop);
            addWeekly(challengesWeeklyEra1.options, 7, pickManyFlowers);

            addWeekly(challengesWeeklyEra1.options, 35, enemiesGrafton);

            addWeekly(challengesWeeklyEra1.options, 14, craftAlcohol15);
            addWeekly(challengesWeeklyEra1.options, 42, consumeAlcohol10);

            addWeekly(challengesWeeklyEra1.options, 14, criticalHits25);
            addWeekly(challengesWeeklyEra1.options, 42, criticalHits25);

            addWeekly(challengesWeeklyEra1.options, 21, claimLakeside);
            addWeekly(challengesWeeklyEra1.options, 49, claimRedRocketMega);

            addWeekly(challengesWeeklyEra1.options, 21, completeEventsQuestsGroup);
            addWeekly(challengesWeeklyEra1.options, 21, craftScrapWeaponArmor);
            addWeekly(challengesWeeklyEra1.options, 21, killHugeCreatures);
            addWeekly(challengesWeeklyEra1.options, 21, prepareFeast);

            var challengesWeeklyEra2 = {
                validStart: new Date(Date.UTC(2020, 5, 23, 15, 0, 0, 0)),
                validEnd: new Date(Date.UTC(2020, 5, 30, 15, 0, 0, 0)),
                options: []
            };

            addWeekly(challengesWeeklyEra2.options, 0, completeEventsQuestsGroup);
            addWeekly(challengesWeeklyEra2.options, 0, craftAlcohol15);
            addWeekly(challengesWeeklyEra2.options, 0, killHugeCreatures);
            addWeekly(challengesWeeklyEra2.options, 0, acquireFlux);
            addWeekly(challengesWeeklyEra2.options, 0, buildupCamp);


            var challengesWeeklyEra3 = {
                validStart: new Date(Date.UTC(2020, 5, 30, 16, 0, 0, 0)),
                validEnd: new Date(Date.UTC(2020, 8, 8, 16, 0, 0, 0)),
                options: [
                ]
            };

            function scoreBuildupCamp(offset) {
                return {
                            name: "Build up your C.A.M.P. or Workshop (all)",
                            offset: offset,
                            period: 1400,
                            subchallenges: [
                                {
                                    name: "Build containers, displays or shelves (x5)",
                                    tipId: "BuildupCampContainer",
                                    tip: "Simply build another Stash Box."
                                },
                                {
                                    name: "Build wall or floor decorations (x5)",
                                    tipId: "BuildupCampFloor",
                                    tip: "Floor mats are the cheapest to build."
                                },
                                {
                                    name: "Build doors or stairs (x5)",
                                },
                                {
                                    name: "Plant crops or build water sources (x10)",
                                    tipId: "BuildupCampCrops",
                                    tip: "Scrap and replant your vegetables."
                                },
                                {
                                    name: "Build generators or lighting (x20)",
                                    tipId: "BuildupCampLighting",
                                    tip: "Placing the cheapest standing lamp works."
                                },
                            ]
                        };
            }

            function scoreBuildupCampAny3(offset) {
                return {
                            name: "Build up your C.A.M.P. or Workshop (any 3)",
                            offset: offset,
                            period: 1400,
                            subchallenges: [
                                {
                                    name: "Build containers, displays or shelves (x5)",
                                    tipId: "BuildupCampContainer",
                                    tip: "Simply build another Stash Box."
                                },
                                {
                                    name: "Build wall or floor decorations (x5)",
                                    tipId: "BuildupCampFloor",
                                    tip: "Floor mats are the cheapest to build."
                                },
                                {
                                    name: "Build doors or stairs (x5)",
                                },
                                {
                                    name: "Plant crops or build water sources (x10)",
                                    tipId: "BuildupCampCrops",
                                    tip: "Scrap and replant your vegetables."
                                },
                                {
                                    name: "Build generators or lighting (x20)",
                                    tipId: "BuildupCampLighting",
                                    tip: "Placing the cheapest standing lamp works."
                                },
                            ]
                        };
            }

            function scoreCompleteEventsGroup5(offset) {
                return {
                            name: "Complete Events in group (x5)",
                            offset: offset,
                            period: 1400,
                            tipId: "ScoreCompleteEventsGroup",
                            tip: "Public teams work too and no need for proximity."
                        };
            }
            function scoreCompleteEventsGroup3(offset) {
                return {
                            name: "Complete Events in group (x3)",
                            offset: offset,
                            period: 1400,
                            tipId: "ScoreCompleteEventsGroup",
                            tip: "Public teams work too and no need for proximity."
                        };
            }

            function scoreCraftScrapItems25(offset) {
                return {
                            name: "Craft or scrap weapons, armor or clothing (x25)",
                            offset: offset,
                            period: 1400,
                        };
            }

            function scoreDestroyRobots5(offset) {
                return {
                            name: "Destroy various robots (any 5)",
                            offset: offset,
                            period: 1400,
                            tipId: "ScoreDestroyRobots",
                            tip: "Watoga has all sorts of robots.",
                            subchallenges: [
                                {
                                    name: "Assaultron"
                                },
                                {
                                    name: "Eyebot (x5)"
                                },
                                {
                                    name: "Liberator  (x5)"
                                },
                                {
                                    name: "Mr. Handy or Mr. Gutsy (x5)"
                                },
                                {
                                    name: "Protectron (x5)"
                                },
                                {
                                    name: "Sentry Bot"
                                },
                                {
                                    name: "Turret (x5)"
                                },
                                {
                                    name: "Vertibot (x5)"
                                },
                            ]
                        };
            }

            function scoreDestroyRobots3(offset) {
                return {
                            name: "Destroy various robots (any 3)",
                            offset: offset,
                            period: 1400,
                            tipId: "ScoreDestroyRobots",
                            tip: "Watoga has all sorts of robots.",
                            subchallenges: [
                                {
                                    name: "Assaultron"
                                },
                                {
                                    name: "Eyebot (x5)"
                                },
                                {
                                    name: "Liberator  (x5)"
                                },
                                {
                                    name: "Mr. Handy or Mr. Gutsy (x5)"
                                },
                                {
                                    name: "Protectron (x5)"
                                },
                                {
                                    name: "Sentry Bot"
                                },
                                {
                                    name: "Turret (x5)"
                                },
                                {
                                    name: "Vertibot (x5)"
                                },
                            ]
                        };
            }

            function scoreGatherBuildingSupplies25(offset) {
                return {
                            name: "Gather Building Supplies (any 5)",
                            offset: offset,
                            period: 1400,
                            tipId: "GatherBuildingSupplies",
                            tip: "You can simply scrap bulk items of these components.",
                            subchallenges: [
                                {
                                    name: "Aluminium (x25)",
                                },
                                {
                                    name: "Concrete (x25)",
                                },
                                {
                                    name: "Copper (x25)",
                                },
                                {
                                    name: "Fertilizer (x25)",
                                },
                                {
                                    name: "Oil (x25)",
                                },
                                {
                                    name: "Screws, spings or gears (x25)",
                                },
                                {
                                    name: "Steel (x100)"
                                },
                                {
                                    name: "Wood (x100)"
                                },
                            ]
                        };
            }

            function scoreGatherBuildingSupplies25Any3(offset) {
                return {
                            name: "Gather Building Supplies (any 3)",
                            offset: offset,
                            period: 1400,
                            tipId: "GatherBuildingSupplies",
                            tip: "You can simply scrap bulk items of these components.",
                            subchallenges: [
                                {
                                    name: "Aluminium (x25)",
                                },
                                {
                                    name: "Concrete (x25)",
                                },
                                {
                                    name: "Copper (x25)",
                                },
                                {
                                    name: "Fertilizer (x25)",
                                },
                                {
                                    name: "Oil (x25)",
                                },
                                {
                                    name: "Screws, spings or gears (x25)",
                                },
                                {
                                    name: "Steel (x100)"
                                },
                                {
                                    name: "Wood (x100)"
                                },
                            ]
                        };
            }

            function scoreKillLegendaries10(offset) {
                return {
                            name: "Kill/destroy legendary enemies (x10)",
                            offset: offset,
                            period: 1400,
                        };
            }
            function scoreKillLegendaries5(offset) {
                return {
                            name: "Kill/destroy legendary enemies (x5)",
                            offset: offset,
                            period: 1400,
                        };
            }
            function scoreLevelUp3(offset) {
                return {
                            name: "Level up (x3)",
                            offset: offset,
                            period: 1400,
                        };
            }

            function scoreGainXP10000(offset) {
                return {
                            name: "&#x267B; Repeatable: Gain 10.000 XP",
                            offset: offset,
                            period: 1400,
                        };
            }

            function scoreCompleteEvents10(offset) {
                return {
                            name: "Complete an event (x10)",
                            offset: offset,
                            period: 1400,
                        };
            }

            function scoreClaimWorkshop5(offset) {
                return {
                            name: "Claim a Workshop (x5)",
                            offset: offset,
                            period: 1400,
                        };
            }
            function scoreClaimWorkshop10(offset) {
                return {
                            name: "Claim a Workshop (x10)",
                            offset: offset,
                            period: 1400,
                        };
            }

            function scoreCriticalHit25(offset) {
                return {
                            name: "Deal critical hit to an enemy (x25)",
                            offset: offset,
                            period: 1400,
                            tipId: "ScoreCriticalHit",
                            tip: "Scoring a critical hit with a Shotgun may still count as 8 critical hits at once."
                        };
            }

            function scoreCriticalHit10(offset) {
                return {
                            name: "Deal critical hit to an enemy (x10)",
                            offset: offset,
                            period: 1400,
                            tipId: "ScoreCriticalHit",
                            tip: "Scoring a critical hit with a Shotgun may still count as 8 critical hits at once."
                        };
            }

            function scoreKillCreature20(offset) {
                return {
                            name: "Kill a creature (x20)",
                            offset: offset,
                            period: 1400,
                        };
            }

            function scoreKillCreature30(offset) {
                return {
                            name: "Kill a creature (x30)",
                            offset: offset,
                            period: 1400,
                        };
            }

            function scoreKillLegendary3(offset) {
                return {
                            name: "Kill/destroy a legendary enemy (x3)",
                            offset: offset,
                            period: 1400,
                        };
            }

            function scoreNWChallenge3(offset) {
                return {
                            name: "&#x2622; NW: Complete a Nuclear Winter challenge (x3)",
                            offset: offset,
                            period: 1400,
                        };
            }

            function scorekillHugeCreatures(offset) {
                return {
                            name: "Kill huge creatures (any 3)",
                            offset: offset,
                            period: 1400,
                            subchallenges: [
                                {
                                    name: "Super Mutant Behemoth",
                                    tipId: "KillHugeSuperMutantBehemoth",
                                    tip: "From the Vantage Point, go down the road towards south-east to find a pond."
                                },
                                {
                                    name: "Deathclaw",
                                    tipId: "KillHugeDeathclaw",
                                    tip: "Check out Deathclaw Island, Hopewell Cave, Thunder Mountain Substation TM-02 north of Watoga."
                                },
                                {
                                    name: "Grafton Monster",
                                    tipId: "KillHugeGraftonMonster",
                                    tip: "In the dried up riverbed between the power plant and the train yard."
                                    + "<br>Near the Charleston Capital fast travel point."
                                },
                                {
                                    name: "Mega Sloth",
                                    tipId: "KillHugeMegasloth",
                                    tip: "Check out South of Mosstown, southeast of the South Belle Motel, NAR Repair Yard,"
                                    + "<br>Cranberry Glade or the Overgrown Sundew Grove."
                                },
                                {
                                    name: "Mirelurk Queen",
                                    tipId: "KillHugeMirelurkQueen",
                                    tip: "Check out Highland Marsh (Mire), Quarry X3 (Cranberry Bog) or Sunrise Field (south of Watoga)."
                                },
                                {
                                    name: "Scorchbeast",
                                    tipId: "KillHugeScorchbeast",
                                    tip: "Any fissure site."
                                },
                                {
                                    name: "Sheepsquatch",
                                    tipId: "KillHugeSheepsquatch",
                                    tip: "Check out the Free Range event or locations such as NAR Repair Yard, Cranberry Glade,"
                                    + "<br>south of the Freakshow in the crater, south of Huntersville towards the crater, "
                                    + "<br>north-west of the Treetop house or west between Berkeley Station and Harper's Ferry."
                                },
                                {
                                    name: "Wendigo Colossus",
                                    tipId: "KillHugeWendigoColossus",
                                    tip: "Nuke fissure prime so that the Overgrown Sundew Grove is in the nuke radius."
                                    + "<br>It has a 7% chance of spawning and keep returning in about 10-15 minutes to trigger a fresh location spawn."
                                },
                            ]
                        };
            }

            function scoreHarvestPlantFungi25(offset) {
                return {
                            name: "Harvest a wild plant or fungi (x25)",
                            offset: offset,
                            period: 1400,
                        };
            }
            function scoreHarvestPlantFungi50(offset) {
                return {
                            name: "Harvest a wild plant or fungi (x50)",
                            offset: offset,
                            period: 1400,
                        };
            }

            function scoreCompleteEvents5(offset) {
                return {
                            name: "Complete an event (x5)",
                            offset: offset,
                            period: 1400,
                        };
            }

            function scoreCriticalHit50(offset) {
                return {
                            name: "Deal critical hit to an enemy (x50)",
                            offset: offset,
                            period: 1400,
                            tipId: "ScoreCriticalHit",
                            tip: "Scoring a critical hit with a Shotgun may still count as 8 critical hits at once."
                        };
            }

            function scoreClaimWorkshop3(offset) {
                return {
                            name: "Claim a workshop (x3)",
                            offset: offset,
                            period: 1400,
                        };
            }
            function scoreCompleteGoldStar(offset) {
                return {
                            name: "Complete a Gold Star daily challenge",
                            offset: offset,
                            period: 1400,
                        };
            }
            function scoreKillCreature50(offset) {
                return {
                            name: "Kill creatures (x50)",
                            offset: offset,
                            period: 1400,
                        };
            }

            function scoreWeeklyplaceholder(offset) {
                return {
                            name: "<i>(Further challenges will be posted when the week comes.)</i>",
                            offset: offset,
                            period: 1400,
                        };
            }

            function scoreBonusLastWeekWeekly(offset) {
                return {
                    name: "&#x1F6C8; Final week double weekly S.C.O.R.E.",
                    offset: offset,
                    period: 100,
                    ignore: true
                };
            }

            addWeekly(challengesWeeklyEra3.options, 0, scoreGainXP10000);
            addWeekly(challengesWeeklyEra3.options, 0, scoreBuildupCamp);
            addWeekly(challengesWeeklyEra3.options, 0, scoreCompleteEventsGroup5);
            addWeekly(challengesWeeklyEra3.options, 0, scoreCraftScrapItems25);
            addWeekly(challengesWeeklyEra3.options, 0, scoreDestroyRobots5);
            addWeekly(challengesWeeklyEra3.options, 0, scoreGatherBuildingSupplies25);
            addWeekly(challengesWeeklyEra3.options, 0, scoreKillLegendaries10);
            addWeekly(challengesWeeklyEra3.options, 0, scoreLevelUp3);

            addWeekly(challengesWeeklyEra3.options, 7, scoreGainXP10000);
            addWeekly(challengesWeeklyEra3.options, 7, scoreLevelUp3);
            addWeekly(challengesWeeklyEra3.options, 7, scoreClaimWorkshop5);
            addWeekly(challengesWeeklyEra3.options, 7, scoreCompleteEvents10);
            addWeekly(challengesWeeklyEra3.options, 7, scoreCriticalHit25);
            addWeekly(challengesWeeklyEra3.options, 7, scoreKillCreature20);
            addWeekly(challengesWeeklyEra3.options, 7, scoreKillLegendary3);
            addWeekly(challengesWeeklyEra3.options, 7, scoreNWChallenge3);

            addWeekly(challengesWeeklyEra3.options, 14, scoreGainXP10000);
            addWeekly(challengesWeeklyEra3.options, 14, scoreBuildupCamp);
            addWeekly(challengesWeeklyEra3.options, 14, scoreCompleteEvents10);
            addWeekly(challengesWeeklyEra3.options, 14, scoreCriticalHit25);
            addWeekly(challengesWeeklyEra3.options, 14, scoreKillCreature30);
            addWeekly(challengesWeeklyEra3.options, 14, scorekillHugeCreatures);
            addWeekly(challengesWeeklyEra3.options, 14, scoreKillLegendaries5);
            addWeekly(challengesWeeklyEra3.options, 14, scoreLevelUp3);

            addWeekly(challengesWeeklyEra3.options, 21, scoreGainXP10000);
            addWeekly(challengesWeeklyEra3.options, 21, scoreClaimWorkshop5);
            addWeekly(challengesWeeklyEra3.options, 21, scoreCompleteEventsGroup3);
            addWeekly(challengesWeeklyEra3.options, 21, scoreCriticalHit10);
            addWeekly(challengesWeeklyEra3.options, 21, scoreDestroyRobots5);
            addWeekly(challengesWeeklyEra3.options, 21, scoreHarvestPlantFungi25);
            addWeekly(challengesWeeklyEra3.options, 21, scoreKillLegendaries10);
            addWeekly(challengesWeeklyEra3.options, 21, scoreLevelUp3);

            addWeekly(challengesWeeklyEra3.options, 28, scoreGainXP10000);
            addWeekly(challengesWeeklyEra3.options, 28, scoreBuildupCamp);
            addWeekly(challengesWeeklyEra3.options, 28, scoreCompleteEvents5);
            addWeekly(challengesWeeklyEra3.options, 28, scoreCraftScrapItems25);
            addWeekly(challengesWeeklyEra3.options, 28, scoreCriticalHit50);
            addWeekly(challengesWeeklyEra3.options, 28, scorekillHugeCreatures);
            addWeekly(challengesWeeklyEra3.options, 28, scoreKillLegendaries5);
            addWeekly(challengesWeeklyEra3.options, 28, scoreLevelUp3);

            addWeekly(challengesWeeklyEra3.options, 35, scoreGainXP10000);
            addWeekly(challengesWeeklyEra3.options, 35, scoreClaimWorkshop3);
            addWeekly(challengesWeeklyEra3.options, 35, scoreCompleteGoldStar);
            addWeekly(challengesWeeklyEra3.options, 35, scoreCompleteEvents10);
            addWeekly(challengesWeeklyEra3.options, 35, scoreGatherBuildingSupplies25);
            addWeekly(challengesWeeklyEra3.options, 35, scoreKillCreature50);
            addWeekly(challengesWeeklyEra3.options, 35, scoreKillLegendaries5);
            addWeekly(challengesWeeklyEra3.options, 35, scoreLevelUp3);

            addWeekly(challengesWeeklyEra3.options, 42, scoreGainXP10000);
            addWeekly(challengesWeeklyEra3.options, 42, scoreBuildupCamp);
            addWeekly(challengesWeeklyEra3.options, 42, scoreClaimWorkshop3);
            addWeekly(challengesWeeklyEra3.options, 42, scoreCompleteGoldStar);
            addWeekly(challengesWeeklyEra3.options, 42, scoreCompleteEvents5);
            addWeekly(challengesWeeklyEra3.options, 42, scoreCriticalHit25);
            addWeekly(challengesWeeklyEra3.options, 42, scoreKillLegendaries10);
            addWeekly(challengesWeeklyEra3.options, 42, scoreLevelUp3);
            
            addWeekly(challengesWeeklyEra3.options, 49, scoreGainXP10000);
            addWeekly(challengesWeeklyEra3.options, 49, scoreCompleteGoldStar);
            addWeekly(challengesWeeklyEra3.options, 49, scoreCompleteEvents10);
            addWeekly(challengesWeeklyEra3.options, 49, scoreClaimWorkshop5);
            addWeekly(challengesWeeklyEra3.options, 49, scoreDestroyRobots3);
            addWeekly(challengesWeeklyEra3.options, 49, scoreHarvestPlantFungi50);
            addWeekly(challengesWeeklyEra3.options, 49, scoreKillCreature50);
            addWeekly(challengesWeeklyEra3.options, 49, scoreLevelUp3);
            
            addWeekly(challengesWeeklyEra3.options, 56, scoreGainXP10000);
            addWeekly(challengesWeeklyEra3.options, 56, scoreBuildupCampAny3);
            addWeekly(challengesWeeklyEra3.options, 56, scoreClaimWorkshop10);
            addWeekly(challengesWeeklyEra3.options, 56, scoreCompleteGoldStar);
            addWeekly(challengesWeeklyEra3.options, 56, scoreCompleteEvents10);
            addWeekly(challengesWeeklyEra3.options, 56, scoreCraftScrapItems25);
            addWeekly(challengesWeeklyEra3.options, 56, scoreCriticalHit25);
            addWeekly(challengesWeeklyEra3.options, 56, scoreGatherBuildingSupplies25Any3);
            addWeekly(challengesWeeklyEra3.options, 56, scoreKillCreature50);
            addWeekly(challengesWeeklyEra3.options, 56, scoreKillLegendaries10);
            addWeekly(challengesWeeklyEra3.options, 56, scoreLevelUp3);
            addWeekly(challengesWeeklyEra3.options, 56, scoreBonusScoreFortifyDays2);
            
            addWeekly(challengesWeeklyEra3.options, 63, scoreGainXP10000);
            addWeekly(challengesWeeklyEra3.options, 63, scoreBuildupCamp);
            addWeekly(challengesWeeklyEra3.options, 63, scoreClaimWorkshop5);
            addWeekly(challengesWeeklyEra3.options, 63, scoreCompleteGoldStar);
            addWeekly(challengesWeeklyEra3.options, 63, scoreCompleteEventsGroup5);
            addWeekly(challengesWeeklyEra3.options, 63, scoreKillCreature50);
            addWeekly(challengesWeeklyEra3.options, 63, scoreKillLegendaries10);
            addWeekly(challengesWeeklyEra3.options, 63, scoreLevelUp3);

            addWeekly(challengesWeeklyEra3.options, 63, scoreBonusLastWeekWeekly);
            

            // placeholder
            /*
            for (var t = 63; t < 70; t += 7) {
                addWeekly(challengesWeeklyEra3.options, t, scoreGainXP10000);
                addWeekly(challengesWeeklyEra3.options, t, scoreLevelUp3);
                addWeekly(challengesWeeklyEra3.options, t, scoreWeeklyplaceholder);
            }
            */


            var challengesWeekly = [
                challengesWeeklyEra1,
                challengesWeeklyEra2,
                challengesWeeklyEra3
            ];

            // --------------------------------------------------------------------------------------------------------------
            // Community events

            function thousands(num) {
                return num.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,');
            }

            var communityProgress = {
                steel: {
                    progress: 212340000,
                    max: 125000000
                },
                concrete: {
                    progress: 15000001,
                    max: 15000000
                },
                cork: {
                    progress: 150000002,
                    max: 150000000
                },
                plastic: {
                    progress: 175900000,
                    max: 150000000
                },
                wood: {
                    progress: 150000003,
                    max: 150000000
                },
                cloth: {
                    progress: 200000000,
                    max: 200000000
                },
                leather: {
                    progress: 60220000,
                    max: 175000000
                },
                glass: {
                    progress: 0,
                    max: 250000000
                },
            };

            function createDonate(what, progress, active, reward, tipId, tip, after) {
                var result = {
                        name: "Donate " + thousands(progress.max) + " " + what,
                        offset: 0,
                        period: 1,
                        tipId: tipId,
                        tip: tip,
                        subchallenges: [
                        ]
                    };

                if (active) {
                    result.subchallenges.push({
                        name: "Progress: <b style='color: green;'>~"
                             + thousands(progress.progress) + "</b> (" + (progress.progress * 100 / progress.max).toFixed(2) + "%)"
                             + "&nbsp;&nbsp;<a href='https://fallout.bethesda.net/en/events' target='_blank'style='font-weight: bold; border: 1px solid blue;' title='See status on bethesda.net'>&nbsp;&#x2197;&nbsp;</a>"
                    });

                    if (progress.progress >= progress.max) {
                        result.name += " &#128077;";
                    }
                } else {
                    result.subchallenges.push({
                        name: "<b style='color: magenta;'>Not started yet. Starts on <i>" + after + "</i>.</b>"
                    });
                }

                result.subchallenges.push({
                    name: "Reward: <i>" + reward + "</i>"
                });

                return result;
            }

            function createEra1Part1(startDate, index, offset, len) {
                var dt = new Date(startDate);
                dt.setDate(dt.getDate() + offset);
                var et = new Date(startDate);
                et.setDate(et.getDate() + offset + len);

                return {
                    validStart: dt,
                    validEnd: et,
                    title: "Community Event: Fortifying ATLAS<br>Project Alpha (step " + (index + 1) + ")",
                    options: [
                        createDonate("Steel Scrap", communityProgress.steel, true, "Brotherhood of Steel Beret", "atlasDonateSteel", 
                                "Kill Super Mutants and scrap their weapons."
                                + "<br>Check out: Huntersville, West Tek, National Isolated Radio Array, General's Steakhouse, Harper's Ferry, Crevasse Dam.")
                        ,
                        createDonate("Concrete Scrap", communityProgress.concrete, index >= 1, "Brotherhood of Steel C.A.M.P. Banner", undefined, undefined, "August 8"),
                        createDonate("Cork Scrap", communityProgress.cork, index >= 2, "High S.C.O.R.E. Double Daily Challenges (August 20 - 24)", undefined, undefined, "August 11"),
                        createDonate("Plastic", communityProgress.plastic, index >= 3, "Bonus Challenges Week (August 26 - 31)", undefined, undefined, "August 15"),
                        {
                            name: "&#x1F6C8; Project Bravo starts on <a href='daily.html?day=2020-08-27'>August 27</a>.",
                            offset: 0,
                            period: 1
                        }
                    ]
                }
            }

            function createEra1Part2(startDate, index, offset, len) {
                var dt = new Date(startDate);
                dt.setDate(dt.getDate() + offset);
                var et = new Date(startDate);
                et.setDate(et.getDate() + offset + len);

                return {
                    validStart: dt,
                    validEnd: et,
                    title: "Community Event: Fortifying ATLAS<br>Project Bravo (step " + (index + 1) + ")",
                    options: [
                        createDonate("Wood Scrap", communityProgress.wood, true, "Steel Dawn Army Fatigues"),
                        createDonate("Cloth", communityProgress.cloth, index >= 1, "Brotherhood of Steel Collectron Station", undefined, undefined, "August 31"),
                        createDonate("Leather", communityProgress.leather, index >= 2, "Purveyor 50% off Super Sale (September 10 - 14)", undefined, undefined, "September 3"),
                        createDonate("Glass", communityProgress.glass, index >= 3, "Meat Week, A Second Helping (September 22 - 28)", undefined, undefined, "September 7"),
                        {
                            name: "&#x1F6C8; Project Alpha started on <a href='daily.html?day=2020-08-04'>August 4</a>.",
                            offset: 0,
                            period: 1
                        }
                    ]
                }
            }

            var communityEvents = [
                createEra1Part1(new Date(Date.UTC(2020, 7, 4, 16, 0, 0, 0)), 0, 0, 4),
                createEra1Part1(new Date(Date.UTC(2020, 7, 4, 16, 0, 0, 0)), 1, 4, 3),
                createEra1Part1(new Date(Date.UTC(2020, 7, 4, 16, 0, 0, 0)), 2, 7, 4),
                createEra1Part1(new Date(Date.UTC(2020, 7, 4, 16, 0, 0, 0)), 3, 11, 3),

                createEra1Part2(new Date(Date.UTC(2020, 7, 27, 16, 0, 0, 0)), 0, 0, 4),
                createEra1Part2(new Date(Date.UTC(2020, 7, 27, 16, 0, 0, 0)), 1, 4, 3),
                createEra1Part2(new Date(Date.UTC(2020, 7, 27, 16, 0, 0, 0)), 2, 7, 4),
                createEra1Part2(new Date(Date.UTC(2020, 7, 27, 16, 0, 0, 0)), 3, 11, 3),

                {
                    validStart: new Date(Date.UTC(2020, 7, 20, 16, 0, 0, 0)),
                    validEnd: new Date(Date.UTC(2020, 7, 26, 16, 0, 0, 0)),
                    title: "Community Event: Meat Week",
                    options: [
                        {
                            name: "Participate in Event: Primal Cuts in multiple regions",
                            offset: 0,
                            period: 1,
                            subchallenges: [
                                {
                                    name: "<i>Starting at :00, :15, :30 and :45 minutes every real hour.</i>"
                                },
                                {
                                    name: "<i>Receive Primal Meat for completion and turn them in for 5-for-5 scrip at the cookout.</i>"
                                }
                            ]
                        },
                        {
                            name: "Participate in the Event: Grahm's Meat Cook",
                            offset: 0,
                            period: 1,
                            subchallenges: [
                                {
                                    name: "<i>Starting at :00 minutes every real hour near Vault 76.</i>"
                                },
                                {
                                    name: "<i>Turn in Primal meat for 5-for-5 scrip.</i>"
                                },
                                {
                                    name: "<i>Craft and turn in Chally's Feed for bonus event progression.</i>"
                                },
                                {
                                    name: "<i>Man the drums and spits, don't just hunt the critters.</i>"
                                },
                                {
                                    name: "<i>Unlike Fasnacht, not actively participating will most likely fail the event.</i>"
                                },
                                {
                                    name: "&#x1F6C8; <i><a href='https://docs.google.com/spreadsheets/d/1eO6GDNSlQYbnFZcyBVSP02RtSwygKcEQFH_NQi_chos/edit#gid=0' target='_blank'>Rewards depend on how well the event succeeds.</a>"
                                }
                            ]
                        }
                    ]
                }
            ];

            // Season =======================

            function scoreAtRank(rank) {
                if (rank <= 1) {
                    return 0;
                }
                return 1000 + (rank - 2) * 25;
            }

            var maxscore = 0;
            for (var i = 2; i <= 100; i++) {
                maxscore += scoreAtRank(i);
            }

            function fillInSeason(season) {
                var season1Days = 70;
                for (var i = 0; i < season1Days; i++) {
                    var rankLinear = (100 * (i + 1) / (season1Days)).toFixed(0);
                    var scoreProgress = maxscore * i / season1Days;
                    var rankScore = 1;
                    var scoreSum = 0;
                    while (scoreSum < scoreProgress) {
                        scoreSum += scoreAtRank(++rankScore);
                    }

                    season.options.push({
                        name: "Expected rank (uniform rank gain): <b style='color: green;'>" + rankLinear + "</b>",
                        offset: i,
                        period: 100,
                        tipId: "LR1RankUniform",
                        tip: "If you play so that you gain 99 / 70 ~ 1.42 ranks each day on average."
                    });
                    season.options.push({
                        name: "Expected rank (uniform S.C.O.R.E. gain): <b style='color: green;'>" + rankScore + "</b>",
                        offset: i,
                        period: 100,
                        tipId: "LR1ScoreUniform",
                        tip: "If you play so that you earn 220,000 / 70 ~ 3150 S.C.O.R.E. each day on average."
                    });
                }
            }

            var season1 = {
                validStart: new Date(Date.UTC(2020, 5, 30, 16, 0, 0, 0)),
                validEnd: new Date(Date.UTC(2020, 8, 8, 16, 0, 0, 0)),
                title: "Season 1: The Legendary Run",
                options: [
                    
                ]
            };
            var season2 = {
                validStart: new Date(Date.UTC(2020, 8, 15, 16, 0, 0, 0)),
                validEnd: new Date(Date.UTC(2020, 10, 24, 16, 0, 0, 0)),
                title: "Season 2: Armor Ace",
                options: [
                    
                ]
            };
            var season3 = {
                validStart: new Date(Date.UTC(2020, 11, 1, 16, 0, 0, 0)),
                validEnd: new Date(Date.UTC(2021, 1, 9, 16, 0, 0, 0)),
                title: "Season 3: The Zetan Zone (or whatever)",
                options: [
                    
                ]
            };

            fillInSeason(season1);
            fillInSeason(season2);
            fillInSeason(season3);

            var seasonEvents = [
                season1,
                season2,
                season3
            ];

            // --------------------------------------------------------------------------------------------------------------

            var infoMap = new Map();
            for (var list of [challenges, challengesWeekly, communityEvents, seasonEvents]) {
                for (var challenge of list) {
                    for (var opt of challenge.options) {
                        if (opt.tipId !== undefined) {
                            infoMap.set(opt.tipId, opt.tip);
                        }
                        if (opt.subchallenges !== undefined) {
                            for (var sc of opt.subchallenges) {
                                if (sc.tipId !== undefined) {
                                    infoMap.set(sc.tipId, sc.tip);
                                }
                            }
                        }
                    }
                }
            }

            // add HTML explanation marker
            function info(name) {
                return "&nbsp;<sup><a href='#' style='font-size: 14; font-weight: bold;' onclick='showinfo(this, \"" + name + "\"); return false;'>Tip</a></sup>";
            }

            // popup for explanation
            function showinfo(target, name) {
                var div = document.getElementById("InfoDiv" + name);
                if (div == null) {
                    var div = document.createElement("div");
                    div.style.border = "1px solid black";
                    div.style.padding = "3px";
                    div.style.position = "absolute";
                    div.style.backgroundColor = "#FFFFD0";
                    div.style.zIndex = 99;
                    div.id = "InfoDiv" + name;
                    var txt = infoMap.get(name);

                    if (txt == null) {
                        txt = "??? " + name + " ???";
                    }
                    txt += "<hr><font style='font-size: 14px'>Click to close.</font>";
                    div.innerHTML = txt;

                    target.parentElement.appendChild(div);
                    div.onclick = function() {
                        target.parentElement.removeChild(div);
                    }
                } else {
                    target.parentElement.removeChild(div);
                }
            }

            function insertSeparatorRow(tbl) {
                var rw = tbl.insertRow(tbl.rows.length);
                var cll = rw.insertCell(rw.cells.length);
                cll.colSpan = 2;
                cll.innerHTML = "&nbsp;";
            }

            function addPrevNext(tbl, list, nonOverlapping) {
                var prevEvt = undefined;
                var nextEvt = undefined;

                for (var evt of list) {
                    if (nonOverlapping) {
                        if (evt.validEnd <= selectedDate) {
                            if (prevEvt === undefined || prevEvt.validStart < evt.validStart) {
                                prevEvt = evt;
                            }
                        }
                    } else {
                        if (evt.validStart < selectedDate) {
                            if (prevEvt === undefined || prevEvt.validStart < evt.validStart) {
                                prevEvt = evt;
                            }
                        }
                    }
                    if (evt.validStart > selectedDate) {
                        if (nextEvt === undefined || nextEvt.validStart > evt.validStart) {
                            nextEvt = evt;
                        }
                    }
                }

                var rw = tbl.insertRow(tbl.rows.length);
                var cll = rw.insertCell(0);
                cll.style.borderTop = '1px dotted green';
                cll.colSpan = 2;

                var tbl2 = document.createElement("table");
                cll.appendChild(tbl2);

                tbl2.style.width='100%'
                rw = tbl2.insertRow(tbl2.rows.length);
                cll = rw.insertCell(0);
                cll.style.width='50%';
                if (prevEvt !== undefined) {
                    var prevDay = prevEvt.validStart.toISOString().substring(0, 10);
                    cll.innerHTML = ("<a href='daily.html?day=" + prevDay + "' title='" + prevEvt.title + "'>&lt; Previous<br>" + prevDay + "</a>");
                }
                cll = rw.insertCell(1);
                cll.style.width='50%';
                if (nextEvt !== undefined) {
                    var nextDay = nextEvt.validStart.toISOString().substring(0, 10);
                    cll.innerHTML = ("<a href='daily.html?day=" + nextDay + "' title='" + nextEvt.title + "'>Next &gt;<br>" + nextDay + "</a>");
                    cll.style.textAlign = "right";
                } else {
                    cll.innerHTML = "Next &gt;<br>To be announced";
                    cll.style.textAlign = "right";
                }
            }

            function updateChallenges() {
                // normalize date
                normalizeDate(selectedDate);

                var endDate = new Date(selectedDate);
                endDate.setDate(endDate.getDate() + 1);

                document.getElementById("showndate").innerHTML = 
                    "<a href='?day=" + selectedDate.toISOString().substring(0, 10) + "' target='_blank'>"
                    + selectedDate.toLocaleDateString() + " " + selectedDate.toLocaleTimeString()
                    + " - " + endDate.toLocaleDateString() + endDate.toLocaleTimeString()
                    + "</a>"
                    ;

                var tbl = document.getElementById("challenges");

                for (var i = tbl.rows.length - 1; i >= 0; i--) {
                    tbl.deleteRow(i);
                }

                var rw = tbl.insertRow(tbl.rows.length);
                var cll = rw.insertCell(rw.cells.length);
                cll.colSpan = 2;
                cll.style.textAlign = "center";
                cll.style.fontWeight = "bold";
                cll.style.padding = "10px";
                cll.style.border = '1px dotted black';
                cll.innerHTML = "<span style='font-size: 24px;'>Daily</span><br><span id='remainingtime'></span>";

                renderList(tbl, challenges, endDate);

                insertSeparatorRow(tbl)

                var rw = tbl.insertRow(tbl.rows.length);
                var cll = rw.insertCell(rw.cells.length);
                cll.colSpan = 2;
                cll.style.textAlign = "center";
                cll.style.fontWeight = "bold";
                cll.style.padding = "10px";
                cll.innerHTML = "<span style='font-size: 24px;'>Weekly</span><br><span id='remainingweek'></span>";
                cll.style.border = '1px dotted black';

                renderList(tbl, challengesWeekly, endDate);

                insertSeparatorRow(tbl)

                if (isActive(communityEvents, endDate)) {
                    var rw = tbl.insertRow(tbl.rows.length);
                    var cll = rw.insertCell(rw.cells.length);
                    cll.colSpan = 2;
                    cll.style.textAlign = "center";
                    cll.style.fontWeight = "bold";
                    cll.style.padding = "10px";
                    cll.innerHTML = "<span style='font-size: 24px;' id='communitytitle'></span><br><span id='remainingcommunity'></span>";
                    cll.style.border = '1px dotted black';

                    renderList(tbl, communityEvents, endDate, "communitytitle");
                } else {
                    var rw = tbl.insertRow(tbl.rows.length);
                    var cll = rw.insertCell(0);

                    cll.innerText = "No active community event.";
                    cll.style.textAlign = "center";
                    cll.style.color = "blue";
                    cll.style.fontWeight = "bold";
                    cll.colSpan = 2;
                    cll.style.padding = "10px";
                    cll.style.border = '1px dotted black';
                }

                addPrevNext(tbl, communityEvents, false);

                insertSeparatorRow(tbl)

                if (isActive(seasonEvents, endDate)) {
                    var rw = tbl.insertRow(tbl.rows.length);
                    var cll = rw.insertCell(rw.cells.length);
                    cll.colSpan = 2;
                    cll.style.textAlign = "center";
                    cll.style.fontWeight = "bold";
                    cll.style.padding = "10px";
                    cll.innerHTML = "<span style='font-size: 24px;' id='seasontitle'></span><br><span id='remainingseason'></span>";
                    cll.style.border = '1px dotted black';

                    renderList(tbl, seasonEvents, endDate, "seasontitle");
                } else {
                    var rw = tbl.insertRow(tbl.rows.length);
                    var cll = rw.insertCell(0);

                    cll.innerText = "No active season.";
                    cll.style.textAlign = "center";
                    cll.style.color = "blue";
                    cll.style.fontWeight = "bold";
                    cll.colSpan = 2;
                    cll.style.padding = "10px";
                    cll.style.border = '1px dotted black';
                }

                addPrevNext(tbl, seasonEvents, true);
            }

            function isActive(challenges, endDate) {
                for (var challenge of challenges) {
                    if (challenge.validStart <= selectedDate
                        && (challenge.validEnd === undefined || challenge.validEnd >= endDate)) {
                            return true;
                    }
                }
                return false;
            }

            function currentStartEndDate(challenges, selectedDate) {
                for (var challenge of challenges) {
                    if (challenge.validStart <= selectedDate
                        && challenge.validEnd > selectedDate) {
                            return {
                                start: challenge.validStart,
                                end: challenge.validEnd
                            };
                    }
                }
                return selectedDate;
            }

            function renderList(tbl, challenges, endDate, titleId) {
                var found = false;
                // find a valid challenge among the data
                for (var challenge of challenges) {
                    if (challenge.validStart <= selectedDate
                        && (challenge.validEnd === undefined || challenge.validEnd >= endDate)) {

                        var timeSince = selectedDate.getTime() - challenge.validStart.getTime();
                        var dayDiff = Math.floor(timeSince / 24 / 60 / 60 / 1000);

                        if (titleId !== undefined) {
                            document.getElementById(titleId).innerHTML = challenge.title;
                        }

                        for (var opt of challenge.options) {
                            var d = dayDiff - opt.offset;
                            var per = Math.floor(d % opt.period);
                            if (per === 0) {
                                var rw = tbl.insertRow(tbl.rows.length);
                                
                                var cll = rw.insertCell(rw.cells.length);
                                cll.colSpan = 2;
                                if (opt.tipId !== undefined) {
                                    cll.innerHTML = "<b>" + opt.name + "</b>" + info(opt.tipId);
                                } else {
                                    cll.innerHTML = "<b>" + opt.name + "</b>";
                                }

                                if (opt.subchallenges !== undefined) {
                                    for (var sc of opt.subchallenges) {

                                        rw = tbl.insertRow(tbl.rows.length);
                                        cll = rw.insertCell(rw.cells.length);
                                        cll.innerHTML = "&nbsp;&nbsp;&nbsp;";

                                        cll = rw.insertCell(rw.cells.length);

                                        if (sc.tipId !== undefined) {
                                            cll.innerHTML = sc.name + info(sc.tipId);
                                        } else {
                                            cll.innerHTML = sc.name;
                                        }
                                    }
                                }
                            }
                        }

                        found = true;
                        break;
                    }
                }

                if (!found) {
                    var rw = tbl.insertRow(tbl.rows.length);
                    var cll = rw.insertCell(0);

                    cll.innerText = "No information available for this date";
                    cll.style.textAlign = "center";
                    cll.style.color = "red";
                    cll.colSpan = 2
                }

            }

            function updateTimer() {
                // normalize date
                normalizeDate(selectedDate);

                var endDate = new Date(selectedDate);
                endDate.setDate(endDate.getDate() + 1);

                var now = new Date();

                var remainingLabel = document.getElementById("remainingtime");
                if (remainingLabel != null) {
                    if (selectedDate <= now && now < endDate) {
                        var diff = endDate - now;
                        remainingLabel.innerText = formatTime(diff / 1000);
                    } else if (selectedDate < now) {
                        remainingLabel.innerHTML = "Past date. <a href='?'>Return to today.</a>";
                    } else {
                        remainingLabel.innerHTML = "Future date. <a href='?'>Return to today.</a>";
                    }
                }

                var remainingWeekLabel = document.getElementById("remainingweek");
                if (remainingWeekLabel != null) {
                    var startDate = new Date(selectedDate);
                    while (startDate.getDay() != 2) {
                        startDate.setDate(startDate.getDate() - 1);
                    }
                    var endDate = new Date(startDate);
                    endDate.setDate(endDate.getDate() + 7);

                    if (startDate <= now && now < endDate) {
                        var diff = endDate - now;
                        remainingWeekLabel.innerText = formatTime(diff / 1000);
                    } else if (startDate < now) {
                        remainingWeekLabel.innerHTML = "Past date. <a href='?'>Return to today.</a>";
                    } else {
                        remainingWeekLabel.innerHTML = "Future date. <a href='?'>Return to today.</a>";
                    }
                }

                var communityStartEnd = currentStartEndDate(communityEvents, selectedDate);
                calcRemainingTime("remainingcommunity", selectedDate, communityStartEnd.start, communityStartEnd.end);

                var seasonStartEnd = currentStartEndDate(seasonEvents, selectedDate);
                calcRemainingTime("remainingseason", selectedDate, seasonStartEnd.start, seasonStartEnd.end);
            }

            function calcRemainingTime(target, selectedDate, startDate, endDate) {
                var now = new Date();
                var targetLabel = document.getElementById(target);
                if (targetLabel != null) {
                    if (startDate <= now && now < endDate) {
                        var diff = endDate - now;
                        targetLabel.innerText = formatTime(diff / 1000);
                    } else if (startDate < now) {
                        targetLabel.innerHTML = "Past event. <a href='?'>Return to today.</a>";
                    } else {
                        targetLabel.innerHTML = "Future event. <a href='?'>Return to today.</a>";
                    }
                }
            }

            function formatTime(timeSeconds) {
                var days = Math.floor(timeSeconds / 24 / 60 / 60);
                var hours = Math.floor(timeSeconds / 60 / 60) % 24;
                var minutes = Math.floor(timeSeconds / 60) % 60;
                var seconds = Math.floor(timeSeconds % 60);

                var str = "";
                if (days > 0) {
                    str += days + " days ";
                }
                str += padZero(hours) + ":" + padZero(minutes) + ":" + padZero(seconds);
                return str;
            }

            function padZero(n) {
                var str = "";
                if (n < 10) {
                    str += "0";
                }
                str += n;
                return str;
            }

            function goDate(delta) {
                selectedDate.setDate(selectedDate.getDate() + delta);
                normalizeDate(selectedDate);
                updateChallenges();
                updateTimer();
            }

            document.getElementById("prevDay").onclick = evt => goDate(-1);
            document.getElementById("nextDay").onclick = evt => goDate(1);
            document.getElementById("prevWeek").onclick = evt => goDate(-7);
            document.getElementById("nextWeek").onclick = evt => goDate(7);

            setInterval(updateTimer, 1000);
            updateChallenges();
            updateTimer();
        </script>
    </body>
</html>